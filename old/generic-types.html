<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <!-- Generated with Sphinx 5.0.2 and Furo 2023.03.27 -->
        <title>Generic types - The Object Oriented Way</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">The Object Oriented Way</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">The Object Oriented Way</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Chapters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../chapters/syntax.html">1. Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/hello-world.html">2. Hello world</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/compilation.html">3. Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/execution.html">4. Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interpretation.html">5. Interpretation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/comments.html">6. Comments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/values.html">7. Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variables.html">8. Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/data-types.html">9. Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/expressions.html">10. Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/arithmetic-operators.html">11. Arithmetic operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/equality-operators.html">12. Equality operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/relational-operators.html">13. Relational operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/logical-operators.html">14. Logical operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/assignment-operator.html">15. Assignment operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/precedence.html">16. Precedence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/associativity.html">17. Associativity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constants.html">18. Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/statements.html">19. Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-inference.html">20. Type inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-checking.html">21. Type checking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/floating-point-types.html">22. Floating-point types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/enumeration-types.html">23. Enumeration types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/selection-statements.html">24. Selection statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/selection-expressions.html">25. Selection expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/iteration.html">26. Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/arrays.html">27. Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/reference-types.html">28. Reference types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/value-types.html">29. Value types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/local-functions.html">30. Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/fat-arrows.html">31. Fat arrows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/recursion.html">32. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/namespaces.html">33. Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/objects.html">34. Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/classes.html">35. Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/access-modifiers.html">36. Access modifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/fields.html">37. Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constructors.html">38. Constructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/the-this-keyword.html">39. The <code class="docutils literal notranslate"><span class="pre">this</span></code> keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/instance-methods.html">40. Instance methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/encapsulation.html">41. Encapsulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/auto-implemented-properties.html">42. Auto-implemented properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/manually-implemented-properties.html">43. Manually implemented properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/object-initializers.html">44. Object initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/read-only-fields.html">45. Read-only fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/read-only-properties.html">46. Read-only properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/computed-properties.html">47. Computed properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/required-properties-and-fields.html">48. Required properties and fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/init-only-properties.html">49. Init-only properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/instance-method-overloading.html">50. Instance method overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constructor-overloading.html">51. Constructor overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-fields.html">52. Static fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-constructors.html">53. Static constructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-methods.html">54. Static methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-properties.html">55. Static properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-classes.html">56. Static classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/top-level-statements.html">57. Top-level statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/object-composition.html">58. Object composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interfaces.html">59. Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/subtype-polymorphism.html">60. Subtype polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/run-time-type-vs-compile-time-type.html">61. Run-time type vs compile-time type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/dynamic-dispatch.html">62. Dynamic dispatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/multiple-interfaces.html">63. Multiple interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/default-interface-methods.html">64. Default interface methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/inheritance.html">65. Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/overriding.html">66. Overriding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/hiding.html">67. Hiding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/the-base-keyword.html">68. The <code class="docutils literal notranslate"><span class="pre">base</span></code> keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constructor-chaining.html">69. Constructor chaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/protected.html">70. Protected access modifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/abstract-classes.html">71. Abstract classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interface-inheritance.html">72. Interface inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-conversions.html">73. Type conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/upcasting.html">74. Upcasting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/downcasting.html">75. Downcasting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/everything-is-an-object.html">76. Everything is an object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/uml-class-diagrams.html">77. UML class diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/maintainability.html">78. Maintainability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/refactoring.html">79. Refactoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generics.html">80. Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-types.html">81. Generic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generics-and-type-errors.html">82. Generics and type errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-supertypes.html">83. Generic supertypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-methods.html">84. Generic methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-parameter-constraints.html">85. Type parameter constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/collections.html">86. Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/collection-initializers.html">87. Collection initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/replace-conditional-with-polymorphism.html">88. Replace conditional with polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/dependency-injection.html">89. Dependency injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/composition-over-inheritance.html">90. Composition over inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/strategy-pattern.html">91. Strategy pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/bridge-pattern.html">92. Bridge pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/delegates.html">93. Delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-delegates.html">94. Generic delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/built-in-delegates.html">95. Built-in delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/multicast-delegates.html">96. Multicast delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/lambdas.html">97. Lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/observer-pattern.html">98. Observer pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/events.html">99. Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/event-conventions.html">100. Event conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/event-driven-programming.html">101. Event-driven programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/iterator-pattern.html">102. Iterator pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/enumerables.html">103. Enumerables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/the-yield-statement.html">104. The <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/anonymous-types.html">105. Anonymous types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/linq.html">106. LINQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variance.html">107. Variance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/covariance.html">108. Covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/contravariance.html">109. Contravariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/invariance.html">110. Invariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/liskov-substitution-principle.html">111. Liskov substitution principle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-classes.html">112. Variant classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-delegates.html">113. Variant delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-generic-delegates.html">114. Variant generic delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-generic-interfaces.html">115. Variant generic interfaces</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Labs (part 1)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../labs/fields.html">Lab: Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/instance-methods.html">Lab: Instance methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/encapsulation.html">Lab: Encapsulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/instance-method-overloading.html">Lab: Instance Method Overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/constructor-overloading.html">Lab: Constructor overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/manually-implemented-properties.html">Lab: Manually implemented properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/computed-properties.html">Lab: Computed Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/static.html">Lab: Static</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/object-composition.html">Lab: Object composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/interfaces.html">Lab: Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/subtype-polymorphism.html">Lab: Subtype polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/overriding.html">Lab: Overriding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/default-interface-methods.html">Lab: Default Interface Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/the-base-keyword.html">Lab: The <code class="docutils literal notranslate"><span class="pre">base</span></code> keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/replace-conditional-with-polymorphism.html">Lab: Replace conditional with polymorphism</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Labs (part 2)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../labs/generics.html">Lab: Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/generic-types.html">Lab: Generic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/generic-supertypes.html">Lab: Generic Supertypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/type-parameter-constraints.html">Lab: Type parameter constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/composition-over-inheritance.html">Lab: Composition over Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/bridge-pattern.html">Lab: Bridge Pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/delegates.html">Lab: Delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/lambdas.html">Lab: Lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/observer-pattern.html">Lab: Observer Pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/events.html">Lab: Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/iterator-pattern.html">Lab: Iterator pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/enumerables.html">Lab: Enumerables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/the-yield-keyword.html">Lab: The <code class="docutils literal notranslate"><span class="pre">yield</span></code> keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/variant-classes.html">Lab: Variant classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/variant-delegates.html">Lab: Variant delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/variant-generic-delegates.html">Lab: Variant Generic Delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/variant-generic-interfaces.html">Lab: Variant Generic Interfaces</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="generic-types">
<h1>Generic types<a class="headerlink" href="#generic-types" title="Permalink to this heading">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Work in progress.</p>
</div>
<p>In the chapter on <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a> we gave an introduction to the different aspects of generics.
In this chapter we will discuss “generic types”, meaning generic classes and interfaces.</p>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this heading">#</a></h2>
<p>In the chapter on <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a> we showed how some problems cannot sensibly be solved by means of <a class="reference internal" href="subtype-polymorphism.html"><span class="doc std std-doc">subtype polymorphism</span></a> (overriding) or <span class="xref myst">ad-hoc polymorphism</span> (overloading).
In cases where the implementation is the same, but the types are different, and no type can be a subtype of the other, it is instead often possible to use parametric polymorphism (or “generics” as we call it in C#) to eliminate duplication and increase modularity.</p>
<p>The most common use case for generic types in C# is probably that of generic collections.
C# offers an extensive <span class="xref myst">type hierarchy</span> of generic collection types which include both interfaces and concrete classes.
This involves everything from simple types like <code class="docutils literal notranslate"><span class="pre">Set&lt;T&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">Stack&lt;T&gt;</span></code> to more complex types like <code class="docutils literal notranslate"><span class="pre">Dictionary&lt;TKey,TValue&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">KeyedCollection&lt;TKey,TItem&gt;</span></code>.</p>
<p>But there are tons of problems that we can solve by writing our own generic types and that’s mostly what we’re going to explore in this chapter.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Generic types allow us to build arbitrarily complex types that depend on other types without needing any knowledge of said types, and while still retaining static type safety.</p>
</div>
<p>If you want to build a type that somehow depends on some other type or types without using generics you have to either resort to using the <span class="xref myst">dynamic</span> keyword or treat your dependencies as the top-type <span class="xref myst">object</span>.
In both cases we will most likely have to perform unsafe <span class="xref myst">type conversions</span> to do anything meaningful.
Which means that we run the risk of run-time errors.</p>
<p>Let’s look at an example without using generics.
Let’s say that we’re trying to build a simple and <a class="reference internal" href="../chapters/immutable-objects.html#immutable-objects"><span class="std std-ref">immutable</span></a> type that simply encapsulates a value of an unknown type.
The value is set through the constructor and can be extracted through a <a class="reference internal" href="properties.html"><span class="doc std std-doc">property</span></a>.
Let’s call it a “box”.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">dynamic</span></code> keyword it would look something like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DynamicBox</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">dynamic</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">DynamicBox</span><span class="w"> </span><span class="p">(</span><span class="kt">dynamic</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Using the top-type object it would look something like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ObjectBox</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">object</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">ObjectBox</span><span class="w"> </span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Simple enough, right?
Does it work?
Sure, both these types work in the sense that we can instantiate them and plop any type of value inside.</p>
<div class="admonition-aside admonition">
<p class="admonition-title">Aside</p>
<p>In fact, if our type could store multiple values at the same time (like say a list) we could even mix values of different types in the same box.
If you want to read more about such a type, have a look at the archeic type <code class="docutils literal notranslate"><span class="pre">ArrayList</span></code> in the <a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.arraylist?view=net-6.0#remarks">documentation</a>.</p>
</div>
<p>Let’s try putting values of different types in our boxes.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">new</span><span class="w"> </span><span class="nf">DynamicBox</span><span class="p">(</span><span class="m">123</span><span class="p">);</span>
<span class="k">new</span><span class="w"> </span><span class="nf">DynamicBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>

<span class="k">new</span><span class="w"> </span><span class="nf">ObjectBox</span><span class="p">(</span><span class="m">123</span><span class="p">);</span>
<span class="k">new</span><span class="w"> </span><span class="nf">ObjectBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>No compile-time errors.
No run-time errors.
So far so good.
But when we try to access the values that are contained in a box we might get slapped with run-time errors since the box could contain values of a type that’s different from what we were expecting.
In the example below, we store a <code class="docutils literal notranslate"><span class="pre">string</span></code> in the box built using <code class="docutils literal notranslate"><span class="pre">dynamic</span></code> and then extract the value and try to assign it to a variable of type <code class="docutils literal notranslate"><span class="pre">int</span></code>.
The code compiles.
But what happens when we run it?
Boom!
We get hit with a run-time exception.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicBox</span><span class="w"> </span><span class="n">dynStrBox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DynamicBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dynStrBox</span><span class="p">.</span><span class="n">X</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Unhandled exception. Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type &#39;string&#39; to &#39;int&#39;</span>
</pre></div>
</div>
<p>But this error just says that we can’t <em>implicitly</em> convert between the types.
What if we <em>explicitly</em> convert (by saying <code class="docutils literal notranslate"><span class="pre">(int)dynStrBox.X</span></code>)?
Same problem, we just get a different exception.
A <code class="docutils literal notranslate"><span class="pre">string</span></code> is just simply not an <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Unhandled exception. Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot convert type &#39;string&#39; to &#39;int&#39;</span>
</pre></div>
</div>
<p>Let’s try doing the same thing with the box built using <code class="docutils literal notranslate"><span class="pre">object</span></code>.
Note that now we’re using the type <code class="docutils literal notranslate"><span class="pre">object</span></code> as opposed to bypassing static type-checking all-together, as in the case of using the keyword <code class="docutils literal notranslate"><span class="pre">dynamic</span></code>.
This means that we have to use <span class="xref myst">downcasting</span> to convert from <code class="docutils literal notranslate"><span class="pre">object</span></code> to whatever type we expect to have.
Same thing here.
The code compiles.
But what happens when we run it?
Boom!
We get hit with a run-time exception.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectBox</span><span class="w"> </span><span class="n">objStrBox</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">objStrBox</span><span class="p">.</span><span class="n">X</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Unhandled exception. System.InvalidCastException: Unable to cast object of type &#39;System.String&#39; to type &#39;System.Int32&#39;.</span>
</pre></div>
</div>
<p>At its core, this is question of <a class="reference internal" href="../chapters/type-systems.html#static-vs-dynamic"><span class="std std-ref">dynamic vs static typing</span></a>.
If you use downcasting or the dynamic keyword you might as well leave the world of static typing all-together.
As we’ve discussed in the chapters on <span class="xref myst">type checking</span> and <span class="xref myst">type systems</span> static typing has immense benefits.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Static typing has immense benefits.
So don’t give it up willy-nilly.
Use generic types to solve the same problem.
Generic types enable us to retain static type safety.</p>
</div>
<p>A generic version of the box type above might look something like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Box</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Box</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We can still stick any type of value in the box.
Importantly however, we must declare what type of values we will be putting in the box before we put any values there.
More precisely, we must make a constructed generic type (e.g. <code class="docutils literal notranslate"><span class="pre">Box&lt;int&gt;</span></code>) out of our generic type definition (<code class="docutils literal notranslate"><span class="pre">Box&lt;T&gt;</span></code>) by replacing our type parameter (<code class="docutils literal notranslate"><span class="pre">&lt;T&gt;</span></code>) with a type argument (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;int&gt;</span></code>).</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Box</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">box5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Box</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">123</span><span class="p">);</span>
<span class="n">Box</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">box6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Box</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>

<span class="kt">int</span><span class="w"> </span><span class="n">x5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">box5</span><span class="p">.</span><span class="n">X</span><span class="p">;</span><span class="w"> </span><span class="c1">// Compiles.</span>
<span class="kt">int</span><span class="w"> </span><span class="n">x6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">box6</span><span class="p">.</span><span class="n">X</span><span class="p">;</span><span class="w"> </span><span class="c1">// Does not compile!</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">error CS0029: Cannot implicitly convert type &#39;string&#39; to &#39;int&#39;.</span>
</pre></div>
</div>
<p>If we now try to convert the value to a type of which it cannot be converted we get a type-error at compile-time.
As we’ve discussed in <a class="reference internal" href="../chapters/fail-fast.html#prefer-compile-time-errors"><span class="std std-ref">previous chapters</span></a> compile-time errors are much preferable than run-time errors.
The code above simply won’t compile if the types don’t line up.
Therefore we’ll never be able to see this error when the application is actually running.</p>
</section>
<section id="definition">
<h2>Definition<a class="headerlink" href="#definition" title="Permalink to this heading">#</a></h2>
<p>A “generic type definition” is not a type but acts as a “template” of a type.
The types of some of the dependencies of the generic type definition are not known at the time of declaration.
These unknown types are represented by <a class="reference internal" href="generic-type-parameters.html"><span class="doc std std-doc">type parameters</span></a>.</p>
<p>When the generic type definition is turned into a “constructed generic type” it becomes a complete type and no longer acts as a template.
To turn the generic type definition into a constructed generic type we must substitute the type parameters with type arguments, meaning actual types.</p>
<p>Both classes and interfaces can be used to declare generic type definitions.
However, only interfaces support, what is known as, type parameter “<span class="xref myst">variance</span>”.
Don’t worry if you have no idea what that means.
We will look at variance in detail in the chapter on <a class="reference internal" href="variant-generic-interfaces.html"><span class="doc std std-doc">variant generic interfaces</span></a>.
This means that all type parameters in generic class definitions are invariant as opposed to variant.</p>
<p>A type parameter can be used anywhere in a generic type definition where a regular type would be used.
This includes input and output types of methods; the type of variables, fields, or properties; or types delegates.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unless you place <span class="xref myst">constraints</span> on a type parameter you cannot make any assumptions about what its interface is.</p>
</div>
<p>Importantly, we can also use a type parameter when stating what other types our type <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inherits from</span></a> or which <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interfaces</span></a> it implements.
That means that it’s possible to combine <a class="reference internal" href="subtype-polymorphism.html"><span class="doc std std-doc">subtyping</span></a> and <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a>.
As you might already suspect, that is very useful.
In the examples section you’ll find many cases of combining the two.
Let’s move on to the examples.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h2>
<p>In this section we’ll first build a simple generic type.
Then we will spend some time refactoring our ciphers to use generics and combine it with subtyping.
Finally, we will explore a few common generic collection types that are built in to .NET.</p>
<section id="pairs">
<h3>Pairs<a class="headerlink" href="#pairs" title="Permalink to this heading">#</a></h3>
<p>Let’s start by building our own generic type for storing <a class="reference internal" href="../chapters/immutable-objects.html#immutable-objects"><span class="std std-ref">immutable</span></a> pairs of values.
The two values in any given pair doesn’t necessarily have to be of the same type.
This data type is commonly called a “Tuple” and it should be noted that .NET already does has a type like this.
Please see the <a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples">documentation</a> for more information.
Nevertheless, this is a simple enough type to make a useful example.
So let’s go.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pair</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T1</span><span class="w"> </span><span class="n">Value1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="n">Value2</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Pair</span><span class="w"> </span><span class="p">(</span><span class="n">T1</span><span class="w"> </span><span class="n">value1</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="n">value2</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">Value1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value1</span><span class="p">;</span>
<span class="w">    </span><span class="n">Value2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value2</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The code above defines a generic class, called <code class="docutils literal notranslate"><span class="pre">Pair</span></code>, with two type parameters referred to as <code class="docutils literal notranslate"><span class="pre">T1</span></code> and <code class="docutils literal notranslate"><span class="pre">T2</span></code>.
Since there’s only a single constructor which takes two arguments (one for each value in the pair) there’s no way to construct an instance of <code class="docutils literal notranslate"><span class="pre">Pair</span></code> without also providing both values.
The type also contains two <a class="reference internal" href="properties.html"><span class="doc std std-doc">properties</span></a> with <a class="reference internal" href="basic-access-modifiers.html"><span class="doc std std-doc">public</span></a> getters but private setters.
So when you instantiate a pair you have to provide both values.
When you have an instance you can extract the values but you cannot change them.
That’s it, and voilà, we’ve written our own generic type definition.</p>
<p>How can you use this?
Well, remember, this is only a generic type definition.
You have to turn it into a constructed generic type.
How do you do that?
By simply replacing the type parameters with actual types.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p1</span><span class="p">;</span>
<span class="n">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p2</span><span class="p">;</span>
</pre></div>
</div>
<p>In the code we’re declaring the two variables <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code> and we’re saying that their types are two constructed generic types.
The first constructed type replaces both type parameters with <code class="docutils literal notranslate"><span class="pre">int</span></code>.
The second constructed type replaces <code class="docutils literal notranslate"><span class="pre">T1</span></code> with <code class="docutils literal notranslate"><span class="pre">string</span></code> and <code class="docutils literal notranslate"><span class="pre">T2</span></code> with <code class="docutils literal notranslate"><span class="pre">bool</span></code>.
Let’s now initialize some variables.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">200</span><span class="p">);</span>
<span class="n">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Pair</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
<p>In the code above we create two new pair variables with the same type as before but now we initialize them immediately.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The type arguments in the compile-time type (meaning the type on the left) are the same types as the type arguments in the run-time types (meaning the type on the right).
If the type parameters of the generic type are invariant then they have to be the same for type-checking to succeed.
If you want to be able to use a different type argument in the run-time type, you must make your type parameters variant.
But this we’ll look into in the chapter on <a class="reference internal" href="variant-generic-interfaces.html"><span class="doc std std-doc">variant generic interfaces</span></a>.</p>
</div>
<p>Remember how we said that generics retain static type safety?
Since the constructed type of <code class="docutils literal notranslate"><span class="pre">p3</span></code> is <code class="docutils literal notranslate"><span class="pre">Pair&lt;string,</span> <span class="pre">bool&gt;</span></code> the compiler knows that anytime we use the getter for <code class="docutils literal notranslate"><span class="pre">Value1</span></code> we will get back a <code class="docutils literal notranslate"><span class="pre">string</span></code>, and whenever we access the getter for <code class="docutils literal notranslate"><span class="pre">Value2</span></code> we will get back a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.
That means that if we use the types in an incorrect manner we’ll get a compiler error instead of an embarrassing and possibly costly run-time error.
That’s great.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">Value1</span><span class="p">;</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">error CS0029: Cannot implicitly convert type &#39;string&#39; to &#39;bool&#39;.</span>
</pre></div>
</div>
</section>
<section id="generic-cipher-interface">
<span id="generic-types-icipher"></span><h3>Generic cipher interface<a class="headerlink" href="#generic-cipher-interface" title="Permalink to this heading">#</a></h3>
<p>Remember how we, in the introductory chapter to <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a>, promised that we would combine our <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interfaces</span></a> <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code>, <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code>, and <code class="docutils literal notranslate"><span class="pre">ICharToStringCipher</span></code> into a single generic interface?
That’s what well do now.
In the coming examples we’ll see what this type allows us to do.</p>
<p>Combining the cipher interfaces into a single interface is a simple task as soon as we realize that we can model encoding as the act of taking a value of some type as input and providing a possibly different value of possibly different type as output.
Let’s use meaningful names for our type parameters and call the two types <code class="docutils literal notranslate"><span class="pre">TIn</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code>.
The former (<code class="docutils literal notranslate"><span class="pre">TIn</span></code>) is the type of values that an implementor of our interface can encode.
The latter (<code class="docutils literal notranslate"><span class="pre">TOut</span></code>) is the type of values that an implementor of our interface returns when encoding.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">TIn</span><span class="p">,</span><span class="w"> </span><span class="n">TOut</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">TOut</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">TIn</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div>
    <div id='dotnet-interactive-this-cell-10499.Microsoft.DotNet.Interactive.Http.HttpPort' style='display: none'>
        The below script needs to be able to find the current output cell; this is an easy method to get it.
    </div>
    <script type='text/javascript'>
async function probeAddresses(probingAddresses) {
    function timeout(ms, promise) {
        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                reject(new Error('timeout'))
            }, ms)
            promise.then(resolve, reject)
        })
    }

    if (Array.isArray(probingAddresses)) {
        for (let i = 0; i < probingAddresses.length; i++) {

            let rootUrl = probingAddresses[i];

            if (!rootUrl.endsWith('/')) {
                rootUrl = `${rootUrl}/`;
            }

            try {
                let response = await timeout(1000, fetch(`${rootUrl}discovery`, {
                    method: 'POST',
                    cache: 'no-cache',
                    mode: 'cors',
                    timeout: 1000,
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: probingAddresses[i]
                }));

                if (response.status == 200) {
                    return rootUrl;
                }
            }
            catch (e) { }
        }
    }
}

function loadDotnetInteractiveApi() {
    probeAddresses(["http://10.1.0.179:2048/", "http://127.0.0.1:2048/"])
        .then((root) => {
        // use probing to find host url and api resources
        // load interactive helpers and language services
        let dotnetInteractiveRequire = require.config({
        context: '10499.Microsoft.DotNet.Interactive.Http.HttpPort',
                paths:
            {
                'dotnet-interactive': `${root}resources`
                }
        }) || require;

            window.dotnetInteractiveRequire = dotnetInteractiveRequire;

            window.configureRequireFromExtension = function(extensionName, extensionCacheBuster) {
                let paths = {};
                paths[extensionName] = `${root}extensions/${extensionName}/resources/`;
                
                let internalRequire = require.config({
                    context: extensionCacheBuster,
                    paths: paths,
                    urlArgs: `cacheBuster=${extensionCacheBuster}`
                    }) || require;

                return internalRequire
            };
        
            dotnetInteractiveRequire([
                    'dotnet-interactive/dotnet-interactive'
                ],
                function (dotnet) {
                    dotnet.init(window);
                },
                function (error) {
                    console.log(error);
                }
            );
        })
        .catch(error => {console.log(error);});
    }

// ensure `require` is available globally
if ((typeof(require) !==  typeof(Function)) || (typeof(require.config) !== typeof(Function))) {
    let require_script = document.createElement('script');
    require_script.setAttribute('src', 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js');
    require_script.setAttribute('type', 'text/javascript');
    
    
    require_script.onload = function() {
        loadDotnetInteractiveApi();
    };

    document.getElementsByTagName('head')[0].appendChild(require_script);
}
else {
    loadDotnetInteractiveApi();
}

    </script>
</div></div></div>
</div>
<p>Simple as that.
This means that we’re now replacing our old specific and verbosely named interfaces with constructed generic interfaces based on the generic interface above.
See <code class="xref std std-numref docutils literal notranslate"><span class="pre">tbl:generic-types:examples:mapping</span></code> for a summary of what we’re replacing our old interfaces with.</p>
<div class="table-wrapper docutils container" id="tbl-generic-types-examples-mapping">
<table class="docutils align-default" id="tbl-generic-types-examples-mapping">
<caption><span class="caption-text">We can now replace our old specific interfaces with constructed generic interfaces.</span><a class="headerlink" href="#tbl-generic-types-examples-mapping" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Before</p></th>
<th class="head"><p>After</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,char&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ICharToStringCipher</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,string&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IStringToString</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ICipher&lt;string,string&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>We haven’t talked about decoding up to this point.
Let’s stop and think about it for one second.
If we took a <code class="docutils literal notranslate"><span class="pre">char</span></code> like <code class="docutils literal notranslate"><span class="pre">L</span></code> and encoded it using the <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> with the vowel <code class="docutils literal notranslate"><span class="pre">o</span></code> then we would end up with <code class="docutils literal notranslate"><span class="pre">LoL</span></code>.
We map from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.
If we then wanted to decode that <code class="docutils literal notranslate"><span class="pre">string</span></code> we should map from <code class="docutils literal notranslate"><span class="pre">string</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code>.
Before our generic types we could of course just have defined that interface and called it <code class="docutils literal notranslate"><span class="pre">IStringToCharCipher</span></code>.
However, with our generic type in place, it’s as simple as making a new constructed generic interface on the fly by simply saying <code class="docutils literal notranslate"><span class="pre">ICipher&lt;string,char&gt;</span></code>.
Pretty neat.</p>
</section>
<section id="identity-cipher">
<h3>Identity cipher<a class="headerlink" href="#identity-cipher" title="Permalink to this heading">#</a></h3>
<p>Before we start looking at something more complex let’s look at the simplest possible cipher, the identity cipher.
Interestingly, the identity cipher can also be implemented generically.
Meaning for all types at the same time.
Since the identity cipher just returns whatever value you give it we don’t need any additional type information to implement it.</p>
<p>In the identity cipher however, <code class="docutils literal notranslate"><span class="pre">TIn</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code> must always be the same type since we always get back the same value as the one we sent in.
So when replacing our type parameters with type arguments we will make sure to use the same type parameter for both <code class="docutils literal notranslate"><span class="pre">TIn</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code>.
So let’s implement that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">IdentityCipher</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Notice how we need to specify that <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> too is a generic type definition by adding the type parameter <code class="docutils literal notranslate"><span class="pre">T</span></code> to its type parameter list.
If we hadn’t added a type parameter to the type definition we would not have said that <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> is a generic type.
This would lead to a compiler error because in the part where we implement the <code class="docutils literal notranslate"><span class="pre">ICipher&lt;T&gt;</span></code> interface we do mention <code class="docutils literal notranslate"><span class="pre">T</span></code>.
So this type argument <code class="docutils literal notranslate"><span class="pre">T</span></code> needs to be declared as a type somewhere.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Remember that it doesn’t matter if we say <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">A</span></code> or <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">-&gt;</span> <span class="pre">T</span></code>.
These are just type parameter names.
What matters is whether the name of two type arguments is the same or not.</p>
</div>
<p>We are also making use of the same <code class="docutils literal notranslate"><span class="pre">T</span></code> on the line where we define the <code class="docutils literal notranslate"><span class="pre">Encode</span></code> method.
Only the <code class="docutils literal notranslate"><span class="pre">T</span></code> within the parameter list of the type that we’re now defining (namely <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> and not <code class="docutils literal notranslate"><span class="pre">ICipher</span></code> is a type parameter.
All other occurrences of <code class="docutils literal notranslate"><span class="pre">T</span></code> are making use of <code class="docutils literal notranslate"><span class="pre">T</span></code>, not declaring that it’s a parameter.
In all other occurrences <code class="docutils literal notranslate"><span class="pre">T</span></code> is a <a class="reference internal" href="generics.html#generics-terminology"><span class="std std-ref">type argument</span></a>, not a type parameter.</p>
<p>Had we omitted the type parameter <code class="docutils literal notranslate"><span class="pre">T</span></code> in the subtype <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> we would get three compiler errors.
One for every usage of the type <code class="docutils literal notranslate"><span class="pre">T</span></code> which would no longer be declared.
Have a look at the erroneous code and the corresponding error below.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">IdentityCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1,32): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)

(1,35): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)

(3,20): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)

(3,10): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="concrete-ciphers">
<h3>Concrete ciphers<a class="headerlink" href="#concrete-ciphers" title="Permalink to this heading">#</a></h3>
<p>Let’s now make our different ciphers implement this interface.</p>
<p>We’ll start with the <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>
Recall that the encoding method of the <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> maps from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code>.
So our constructed generic interface that we want to implement must have type <code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,</span> <span class="pre">char&gt;</span></code>.
Because <code class="docutils literal notranslate"><span class="pre">TIn</span></code> is a <code class="docutils literal notranslate"><span class="pre">char</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code> is a <code class="docutils literal notranslate"><span class="pre">char</span></code>.
Notice how <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> remains a non-generic type.
All we’re doing is that we’re saying that it implements an interface which is a constructed generic type.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CaesarCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">alphabet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVXYZ&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">newIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">newIndex</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">newIndex</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">IsLower</span><span class="p">(</span><span class="n">input</span><span class="p">))</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToLower</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">]);</span>
<span class="w">      </span><span class="k">else</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Now let’s try <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code>
As we know, the encode method of the <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> maps from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.
So, it’s as simple as saying that our class implements the constructed generic interface <code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,string&gt;</span></code>.
In other words, it implements the constructed generic interface <code class="docutils literal notranslate"><span class="pre">ICipher</span></code> where <code class="docutils literal notranslate"><span class="pre">TIn</span></code> is <code class="docutils literal notranslate"><span class="pre">char</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code> is <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">RobbersCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">RobbersCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">vowel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">consonants</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;BCDFGHJKLMNPQRSTVXYZ&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">consonants</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}{vowel}{input}&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Same deal with <code class="docutils literal notranslate"><span class="pre">LeetCipher</span></code> but here we implement the constructed generic interface <code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,char&gt;</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LeetCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;L&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;L&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;4&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;4&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;O&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;O&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;T&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;7&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;7&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;T&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;E&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;3&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;3&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;E&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="k">default</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Pretty straight-forward right?
The implementations don’t have to change.
All we’re doing is that we’re replacing our old verbose and overly specific interfaces with constructed generic interfaces.</p>
</section>
<section id="composite-ciphers">
<h3>Composite ciphers<a class="headerlink" href="#composite-ciphers" title="Permalink to this heading">#</a></h3>
<p>In the chapter on <a class="reference internal" href="../chapters/abstract-injected-object-composition.html#abstract-injected-object-composition-examples-composite-ciphers"><span class="std std-ref">abstract injected object composition</span></a> we implemented a composite cipher that, when encoding, essentially applied one cipher after another.
Unfortunately our implementation only supported ciphers that map from <code class="docutils literal notranslate"><span class="pre">string</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.
We stated that while it would certainly be both possible and useful to write an implementation that supports ciphers that map from, say, <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code> it would also lead to us duplicating the whole class.
Not good.</p>
<p>Remember how we said that if the implementation is the same, but the types are different, and no type can be a subtype of another, then we can probably use generics?
Well, that’s precisely the case that we have here.</p>
<p>Let’s write a new and <em>generic</em> implementation of <code class="docutils literal notranslate"><span class="pre">CompositeCipher</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CompositeCipher</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CompositeCipher</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">,</span>
<span class="w">      </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">second</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Does it work like before?
Yes indeed.
All we have to do is to swap out the types and then we can run exactly the same example as before.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">CompositeCipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">composite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompositeCipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">LeetCipher</span><span class="p">());</span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">composite</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="sc">&#39;E&#39;</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>F
</pre></div>
</div>
</div>
</div>
<p>Of course, that’s not all.
The whole point of this was that we wanted to be able to support compositions of other types of ciphers.
Did we succeed in that?</p>
<p>To be able to give an example we have to first quickly change the interfaces of our types <code class="docutils literal notranslate"><span class="pre">SubstitutionCipher</span></code> and <code class="docutils literal notranslate"><span class="pre">CharToStringAdapter</span></code> from the chapter on <span class="xref myst">abstract injected object composition</span>.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SubstitutionCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">SubstitutionCipher</span><span class="w"> </span><span class="p">(</span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">cipher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">SubstitutionCipher</span><span class="w"> </span><span class="p">(</span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">cipher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CharToStringAdapter</span><span class="p">(</span><span class="n">cipher</span><span class="p">);</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CharToStringAdapter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CharToStringAdapter</span><span class="w"> </span><span class="p">(</span><span class="n">ICipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">cipher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">).</span><span class="n">ToString</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>With that out of the way, let’s now look at an example that uses our generic composite cipher type to compose ciphers that map from <code class="docutils literal notranslate"><span class="pre">string</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="w"> </span><span class="n">caesars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubstitutionCipher</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">));</span>
<span class="kt">var</span><span class="w"> </span><span class="n">leet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubstitutionCipher</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">LeetCipher</span><span class="p">());</span>

<span class="n">CompositeCipher</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">composite</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="n">CompositeCipher</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">caesars</span><span class="p">,</span><span class="w"> </span><span class="n">leet</span><span class="p">);</span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">composite</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BCD3FGHIJK1MN0PQRS7UVXWYZ4
</pre></div>
</div>
</div>
</div>
</section>
<section id="composing-different-types">
<h3>Composing different types<a class="headerlink" href="#composing-different-types" title="Permalink to this heading">#</a></h3>
<p>But wait a minute.
Who says the first input have to equal the final output?
It doesn’t really matter what type of value the first cipher returns as long as its the same type of value that the second cipher expects as input.</p>
<p>Let’s write a more general definition.
How about the following?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CompositeCipher</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span><span class="o">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T3</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">;</span>
<span class="w">  </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CompositeCipher</span><span class="w"> </span><span class="p">(</span>
<span class="w">      </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="o">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">,</span>
<span class="w">      </span><span class="n">ICipher</span><span class="o">&lt;</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span><span class="o">&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">second</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T3</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T1</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>But why is this needed you ask?
Well, because now we can compose an instance of <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> which maps from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code> with the other ciphers that map from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">CompositeCipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">composite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompositeCipher</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">RobbersCipher</span><span class="p">(</span><span class="sc">&#39;o&#39;</span><span class="p">));</span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">composite</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BoB
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>We are now closing in on something called “function composition” so if your’e intrigued by this then I highly recommend that you look in to functional programming.
But finish this book first, because we have a lot more to learn that will also aid in understanding functional programming.</p>
</div>
<p>Feels like it’s all coming together.
But don’t worry, we have many chapters to go and more cool things left to do.</p>
</section>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<div class="exercise admonition" id="old/generic-types-exercise-0">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>What are genric types?</p>
</section>
</div>
<div class="exercise admonition" id="old/generic-types-exercise-1">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>What is the difference between a generic type <em>definition</em> and a <em>constructed</em> generic type?</p>
</section>
</div>
<div class="exercise admonition" id="old/generic-types-exercise-2">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Why does the generic type <code class="docutils literal notranslate"><span class="pre">CompositeCipher&lt;T1,T2,T3&gt;</span></code> require three type parameters? Can we achieve the same functionality with just two?</p>
</section>
</div>
<div class="exercise admonition" id="old/generic-types-exercise-3">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Rewrite the class <code class="docutils literal notranslate"><span class="pre">SequenceCipher</span></code> from <code class="xref std std-numref docutils literal notranslate"><span class="pre">ex:array-cipher</span></code> so that it implements a construction of the generic interface <code class="docutils literal notranslate"><span class="pre">ICipher&lt;TIn,TOut&gt;</span></code>.
Bonus question: Can the class <code class="docutils literal notranslate"><span class="pre">SequenceCipher</span></code> be made generic?
Why or why not?</p>
</section>
</div>
<div class="exercise admonition" id="ex:generic-types:conditional-cipher">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Rewrite the conditional cipher that we implemented in <code class="xref std std-numref docutils literal notranslate"><span class="pre">abstract-injected-object-composition:exercises:predicates</span></code> so that it is generic.</p>
<p>Hint: This also requires that we rewrite the predicate interface from that same exercise.</p>
</section>
</div>
<div class="exercise admonition" id="old/generic-types-exercise-5">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Come up with and implement your own <em>generic type</em> that fits into our ecosystem of ciphers.</p>
</section>
</div>
<div class="exercise admonition" id="old/generic-types-exercise-6">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Come up with and implement your own type that subtypes a constructed generic type.
The constructed generic type should be constructed from one of the generic types that we’ve discussed in this chapter.</p>
</section>
</div>
<div class="exercise admonition" id="old/generic-types-exercise-7">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Write a generic class called <code class="docutils literal notranslate"><span class="pre">Repeater&lt;T&gt;</span></code> that takes an element of type <code class="docutils literal notranslate"><span class="pre">T</span></code> in its constructor and exposes an instance method with the signature <code class="docutils literal notranslate"><span class="pre">T[]</span> <span class="pre">Repeat</span> <span class="pre">(int</span> <span class="pre">times)</span></code>.
The instance method returns a new array of a length equal to <code class="docutils literal notranslate"><span class="pre">times</span></code> where every position contains the element passed through the constructor.</p>
<p>When you are done, you should be able to run the following code and get the same result.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Repeater</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">T</span><span class="w"> </span><span class="n">elem</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Repeater</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">elem</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="nf">Repeat</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">times</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">T</span><span class="p">[]</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">T</span><span class="p">[</span><span class="n">times</span><span class="p">];</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="n">times</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">      </span><span class="n">xs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elem</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">xs</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Repeater</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">repeater</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Repeater</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Echo&quot;</span><span class="p">);</span>
<span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repeater</span><span class="p">.</span><span class="n">Repeat</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="n">Join</span><span class="p">(</span><span class="s">&quot;, &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Echo, Echo, Echo, Echo, Echo
</pre></div>
</div>
</div>
</div>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: ".net-csharp"
        },
        kernelOptions: {
            name: ".net-csharp",
            path: "./old"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = '.net-csharp'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; All rights reserved. By using this site, you agree to our use of cookies for Google Analytics.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Generic types</a><ul>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#definition">Definition</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#pairs">Pairs</a></li>
<li><a class="reference internal" href="#generic-cipher-interface">Generic cipher interface</a></li>
<li><a class="reference internal" href="#identity-cipher">Identity cipher</a></li>
<li><a class="reference internal" href="#concrete-ciphers">Concrete ciphers</a></li>
<li><a class="reference internal" href="#composite-ciphers">Composite ciphers</a></li>
<li><a class="reference internal" href="#composing-different-types">Composing different types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=G-V69WNXD095"></script>
    <script src="../_static/custom.js"></script>
    <script src="../_static/analytics.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    </body>
</html>