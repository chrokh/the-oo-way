<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" />

    <!-- Generated with Sphinx 5.0.2 and Furo 2023.03.27 -->
        <title>Subtype polymorphism - The Object Oriented Way</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">The Object Oriented Way</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">The Object Oriented Way</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Chapters</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../chapters/syntax.html">1. Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/hello-world.html">2. Hello world</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/compilation.html">3. Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/execution.html">4. Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interpretation.html">5. Interpretation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/comments.html">6. Comments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/values.html">7. Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variables.html">8. Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/data-types.html">9. Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/expressions.html">10. Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/arithmetic-operators.html">11. Arithmetic operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/equality-operators.html">12. Equality operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/relational-operators.html">13. Relational operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/logical-operators.html">14. Logical operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/assignment-operator.html">15. Assignment operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/precedence.html">16. Precedence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/associativity.html">17. Associativity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constants.html">18. Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/statements.html">19. Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-inference.html">20. Type inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-checking.html">21. Type checking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/floating-point-types.html">22. Floating-point types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/enumeration-types.html">23. Enumeration types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/selection-statements.html">24. Selection statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/selection-expressions.html">25. Selection expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/iteration.html">26. Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/arrays.html">27. Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/reference-types.html">28. Reference types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/value-types.html">29. Value types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/local-functions.html">30. Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/fat-arrows.html">31. Fat arrows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/recursion.html">32. Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/namespaces.html">33. Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/objects.html">34. Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/classes.html">35. Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/access-modifiers.html">36. Access modifiers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/fields.html">37. Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constructors.html">38. Constructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/the-this-keyword.html">39. The <code class="docutils literal notranslate"><span class="pre">this</span></code> keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/instance-methods.html">40. Instance methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/encapsulation.html">41. Encapsulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/auto-implemented-properties.html">42. Auto-implemented properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/manually-implemented-properties.html">43. Manually implemented properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/object-initializers.html">44. Object initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/read-only-fields.html">45. Read-only fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/read-only-properties.html">46. Read-only properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/computed-properties.html">47. Computed properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/required-properties-and-fields.html">48. Required properties and fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/init-only-properties.html">49. Init-only properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/instance-method-overloading.html">50. Instance method overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constructor-overloading.html">51. Constructor overloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-fields.html">52. Static fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-constructors.html">53. Static constructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-methods.html">54. Static methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-properties.html">55. Static properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/static-classes.html">56. Static classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/top-level-statements.html">57. Top-level statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/object-composition.html">58. Object composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interfaces.html">59. Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/subtype-polymorphism.html">60. Subtype polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/run-time-type-vs-compile-time-type.html">61. Run-time type vs compile-time type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/dynamic-dispatch.html">62. Dynamic dispatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/multiple-interfaces.html">63. Multiple interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interface-default-implementations.html">64. Interface default implementations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/inheritance.html">65. Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/overriding.html">66. Overriding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/hiding.html">67. Hiding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/the-base-keyword.html">68. The <code class="docutils literal notranslate"><span class="pre">base</span></code> keyword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/constructor-chaining.html">69. Constructor chaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/protected.html">70. Protected access modifier</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/abstract-classes.html">71. Abstract classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/interface-inheritance.html">72. Interface inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-conversions.html">73. Type conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/upcasting.html">74. Upcasting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/downcasting.html">75. Downcasting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/everything-is-an-object.html">76. Everything is an object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/uml-class-diagrams.html">77. UML class diagrams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/maintainability.html">78. Maintainability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/refactoring.html">79. Refactoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generics.html">80. Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-types.html">81. Generic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generics-and-type-errors.html">82. Generics and type errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-supertypes.html">83. Generic supertypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-methods.html">84. Generic methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/type-parameter-constraints.html">85. Type parameter constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/collections.html">86. Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/collection-initializers.html">87. Collection initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/replace-conditional-with-polymorphism.html">88. Replace conditional with polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/dependency-injection.html">89. Dependency injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/composition-over-inheritance.html">90. Composition over inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/strategy-pattern.html">91. Strategy pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/bridge-pattern.html">92. Bridge pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/delegates.html">93. Delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/generic-delegates.html">94. Generic delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/built-in-delegates.html">95. Built-in delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/multicast-delegates.html">96. Multicast delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/lambdas.html">97. Lambdas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/observer-pattern.html">98. Observer pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/events.html">99. Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/event-conventions.html">100. Event conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/event-driven-programming.html">101. Event-driven programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/iterator-pattern.html">102. Iterator pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/enumerables.html">103. Enumerables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/the-yield-statement.html">104. The <code class="docutils literal notranslate"><span class="pre">yield</span></code> statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/anonymous-types.html">105. Anonymous types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/linq.html">106. LINQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variance.html">107. Variance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/covariance.html">108. Covariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/contravariance.html">109. Contravariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/invariance.html">110. Invariance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/liskov-substitution-principle.html">111. Liskov substitution principle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-classes.html">112. Variant classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-delegates.html">113. Variant delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-generic-delegates.html">114. Variant generic delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chapters/variant-generic-interfaces.html">115. Variant generic interfaces</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Labs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../labs/replace-conditional-with-polymorphism.html">Lab: Replace conditional with polymorphism</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/generics.html">Lab: Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/generic-types.html">Lab: Generic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/generic-supertypes.html">Lab: Generic Supertypes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/type-parameter-constraints.html">Lab: Type parameter constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/composition-over-inheritance.html">Lab: Composition over Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/bridge-pattern.html">Lab: Bridge Pattern</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/delegates.html">Lab: Delegates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../labs/lambdas.html">Lab: Lambdas</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="subtype-polymorphism">
<span id="polymorphism"></span><h1>Subtype polymorphism<a class="headerlink" href="#subtype-polymorphism" title="Permalink to this heading">#</a></h1>
<section id="motivation">
<h2>Motivation<a class="headerlink" href="#motivation" title="Permalink to this heading">#</a></h2>
<p>The time has come to talk about subtype polymorphism.
If you haven’t studied polymorphism before, let me just spill the beans and tell you that this is, arguably, <em>the most important idea in object oriented programming</em>.
Luckily it is also the most mind-bendingly interesting topic in object oriented programming.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Polymorphism allows us to explicitly or implicitly define a contract that multiple different types can implement.
This allows us to use these different types interchangeably without needing to be concerned about which particular type we have.</p>
</div>
<p>The word “polymorphism” comes from Greek and means “many-shaped”.
There are many types of polymorphism and in this chapter we’re specifically talking about subtype polymorphism.
Which types of polymorphism exists depends on who you ask but I tend to follow the division of <span id="id1">Cardelli and Wegner [<a class="reference internal" href="../chapters/bibliography.html#id7" title="Luca Cardelli and Peter Wegner. On understanding types, data abstraction, and polymorphism. ACM Computing Surveys (CSUR), 17(4):471–523, 1985.">1985</a>]</span> where we have the following four types:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="generics.html"><span class="doc std std-doc">Parametric polymorphism</span></a>.</p></li>
<li><p>Inclusion / subtype / overriding polymorphism.</p></li>
<li><p><span class="xref myst">Overloading polymorphism</span>.</p></li>
<li><p><span class="xref myst">Coercion polymorphism</span>.</p></li>
</ol>
<p>In this chapter we will talk about subtype polymorphism.
In previous chapters we have already talked about <span class="xref myst">overloading</span> without calling it overloading polymorphism.
In a coming chapter on <span class="xref myst">object type conversions</span> we will talk about “implicit type conversions” which is what coercion polymorphism tends to refer to.
Finally, we will also talk about parametric polymorphism in the chapter on <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a> since this is what the C# implementation of the concept is called.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When someone just says “polymorphism” in the context of object oriented programming then they are most likely referring to <em>subtype polymorphism</em>.</p>
</div>
</section>
<section id="definition">
<h2>Definition<a class="headerlink" href="#definition" title="Permalink to this heading">#</a></h2>
<section id="inclusion">
<h3>Inclusion<a class="headerlink" href="#inclusion" title="Permalink to this heading">#</a></h3>
<p>To understand subtype/inclusion polymorphism we must understand the idea of subtyping or of inclusion.
Think back to the notion of subsets from the chapter on <span class="xref myst">sets</span>.</p>
<p>Let’s say that we’ve got a set of cats that we call <span class="math notranslate nohighlight">\(\mathit{Cat}\)</span> and a set of dogs that we call <span class="math notranslate nohighlight">\(\mathit{Dog}\)</span>.
If we claim that <span class="math notranslate nohighlight">\(\mathit{Cat}\)</span> and <span class="math notranslate nohighlight">\(\mathit{Dog}\)</span> are <em>subtypes</em> of <span class="math notranslate nohighlight">\(\mathit{Animal}\)</span> then we are claiming that they are subsets of <span class="math notranslate nohighlight">\(\mathit{Animal}\)</span>.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}
\mathit{Cat} \subset \mathit{Animal}\\
\mathit{Dog} \subset \mathit{Animal}
\end{split}\]</div>
</div>
<p>In terms of <em>subsets</em> this means that all members of the set <span class="math notranslate nohighlight">\(\mathit{Cat}\)</span> are also members of the set <span class="math notranslate nohighlight">\(\mathit{Animal}\)</span>.
Same for dogs.
Have a look back in the chapter on <span class="xref myst">sets</span> if this isn’t obvious.</p>
<p>In terms of <em>subtypes</em> however this means that a <span class="math notranslate nohighlight">\(\mathit{Cat}\)</span> can be used at any point where an <span class="math notranslate nohighlight">\(\mathit{Animal}\)</span> is expected.
Same for dogs.</p>
<p>The opposite of a subtype is called a “supertype”.
Instead of the subtype-supertype terminology you will also often find the pairs child type-parent type, and base type-derived type.
The terminology is summarized in <code class="xref std std-numref docutils literal notranslate"><span class="pre">tbl:subtype-supertype-terminology</span></code>.</p>
<div class="table-wrapper colwidths-auto docutils container" id="tbl-subtype-supertype-terminology">
<table class="docutils align-default" id="tbl-subtype-supertype-terminology">
<caption><span class="caption-text">Alternatives to the subtype-supertype terminology.</span><a class="headerlink" href="#tbl-subtype-supertype-terminology" title="Permalink to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head text-center"><p>Supertype</p></th>
<th class="head text-center"><p>Subtype</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>Parent type</p></td>
<td class="text-center"><p>Child type</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>Base type</p></td>
<td class="text-center"><p>Derived type</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="notation">
<h3>Notation<a class="headerlink" href="#notation" title="Permalink to this heading">#</a></h3>
<p>So how do we declare one type a subtype of another type?
Well, in C#, and many other object oriented langauges, there are usually two ways.
A subtype relationship can be established by either:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="interfaces.html"><span class="doc std std-doc">Interface implementation</span></a>, or</p></li>
<li><p><a class="reference internal" href="inheritance.html"><span class="doc std std-doc">Inheritance</span></a>.</p></li>
</ol>
<p>If type <code class="docutils literal notranslate"><span class="pre">A</span></code> implements the <code class="docutils literal notranslate"><span class="pre">interface</span></code> defined by type <code class="docutils literal notranslate"><span class="pre">B</span></code> then <code class="docutils literal notranslate"><span class="pre">A</span></code> is considered a subtype of <code class="docutils literal notranslate"><span class="pre">B</span></code>.
If type <code class="docutils literal notranslate"><span class="pre">A</span></code> inherits from the class or abstract class <code class="docutils literal notranslate"><span class="pre">B</span></code> then <code class="docutils literal notranslate"><span class="pre">A</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">B</span></code>.</p>
<p>We’ll explore how to create subtype relationships by means of inheritance in the chapter on <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inheritance</span></a>.
In this chapter we will focus on how to create subtype relationships by means of interfaces.</p>
<p>Notationally you will often find the less-than-sign (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>) being used to denote subtyping.
Where the subtype is on the left and the supertype is on the right.
In C# however we tend to use the same symbol as for <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interface</span></a> implementation and <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inheritance</span></a>, namely colon (<code class="docutils literal notranslate"><span class="pre">:</span></code>).
The subtype is still on the left, and the supertype on the right.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Cat</span> <span class="p">:</span> <span class="n">IAnimal</span>
<span class="n">Dog</span> <span class="p">:</span> <span class="n">IAnimal</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you happen to already be familiar with <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inheritance</span></a> it is important to realize that subtype does not <em>necessarily</em> mean subclass.
While a subtype can be created by means of inheritance it can also be created by means of interface implementation.</p>
</div>
</section>
<section id="substitutability">
<h3>Substitutability<a class="headerlink" href="#substitutability" title="Permalink to this heading">#</a></h3>
<p>This idea of being able to use some type instead of another is known as “substitutability”.
We’ll talk more about what ought to be substitutable for what in the chapter on <a class="reference internal" href="liskov-substitution-principle.html#liskov-substitution-principle"><span class="std std-ref">Liskov’s substitution principle</span></a>.
In general however, this means that the <em>state and behavior</em> of any subtype must be a legal state and behavior of its supertype.</p>
<p>Assume that the two types <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and <code class="docutils literal notranslate"><span class="pre">Dog</span></code> are subtypes of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.
Inversely, <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> is a supertype of both <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and <code class="docutils literal notranslate"><span class="pre">Dog</span></code>.
This means that any value of type <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and any value of type <code class="docutils literal notranslate"><span class="pre">Dog</span></code> must at all times be legal states and behaviors given our definition of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.
In other words, all dogs and all cats must at all times, with no exceptions, behave like animals.
If this condition is satisfied then we are free to declare that <code class="docutils literal notranslate"><span class="pre">Dog</span></code> and <code class="docutils literal notranslate"><span class="pre">Cat</span></code> are subtypes of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.</p>
<p>Remember how we, way back in the chapter on <span class="xref myst">data types</span>, said that the type on the left doesn’t necessarily have to be the same as the type on the right?
Or in other words, how the compile-time type doesn’t necessarily have to be the same as the run-time type.
Well, let’s unpack that statement now.
Have a look at this code:</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">IAnimal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IAnimal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Dog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IAnimal</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output text_html">
<div>
    <div id='dotnet-interactive-this-cell-10009.Microsoft.DotNet.Interactive.Http.HttpPort' style='display: none'>
        The below script needs to be able to find the current output cell; this is an easy method to get it.
    </div>
    <script type='text/javascript'>
async function probeAddresses(probingAddresses) {
    function timeout(ms, promise) {
        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                reject(new Error('timeout'))
            }, ms)
            promise.then(resolve, reject)
        })
    }

    if (Array.isArray(probingAddresses)) {
        for (let i = 0; i < probingAddresses.length; i++) {

            let rootUrl = probingAddresses[i];

            if (!rootUrl.endsWith('/')) {
                rootUrl = `${rootUrl}/`;
            }

            try {
                let response = await timeout(1000, fetch(`${rootUrl}discovery`, {
                    method: 'POST',
                    cache: 'no-cache',
                    mode: 'cors',
                    timeout: 1000,
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: probingAddresses[i]
                }));

                if (response.status == 200) {
                    return rootUrl;
                }
            }
            catch (e) { }
        }
    }
}

function loadDotnetInteractiveApi() {
    probeAddresses(["http://10.1.0.74:2048/", "http://127.0.0.1:2048/"])
        .then((root) => {
        // use probing to find host url and api resources
        // load interactive helpers and language services
        let dotnetInteractiveRequire = require.config({
        context: '10009.Microsoft.DotNet.Interactive.Http.HttpPort',
                paths:
            {
                'dotnet-interactive': `${root}resources`
                }
        }) || require;

            window.dotnetInteractiveRequire = dotnetInteractiveRequire;

            window.configureRequireFromExtension = function(extensionName, extensionCacheBuster) {
                let paths = {};
                paths[extensionName] = `${root}extensions/${extensionName}/resources/`;
                
                let internalRequire = require.config({
                    context: extensionCacheBuster,
                    paths: paths,
                    urlArgs: `cacheBuster=${extensionCacheBuster}`
                    }) || require;

                return internalRequire
            };
        
            dotnetInteractiveRequire([
                    'dotnet-interactive/dotnet-interactive'
                ],
                function (dotnet) {
                    dotnet.init(window);
                },
                function (error) {
                    console.log(error);
                }
            );
        })
        .catch(error => {console.log(error);});
    }

// ensure `require` is available globally
if ((typeof(require) !==  typeof(Function)) || (typeof(require.config) !== typeof(Function))) {
    let require_script = document.createElement('script');
    require_script.setAttribute('src', 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js');
    require_script.setAttribute('type', 'text/javascript');
    
    
    require_script.onload = function() {
        loadDotnetInteractiveApi();
    };

    document.getElementsByTagName('head')[0].appendChild(require_script);
}
else {
    loadDotnetInteractiveApi();
}

    </script>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IAnimal</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="n">IAnimal</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>The left-hand type, the compile-time type, of both variables is <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.
However, the right-hand type, the run-time type, is <code class="docutils literal notranslate"><span class="pre">Cat</span></code> for one of the variables and <code class="docutils literal notranslate"><span class="pre">Dog</span></code> for the other.
For this code to compile <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and <code class="docutils literal notranslate"><span class="pre">Dog</span></code> must both be subtypes of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.</p>
<p>Let’s generalize.
A run-time type can be used if the run-time type is the same as the expected compile-time type or if the run-time type is a subtype of the compile-time type.
In other words, whenever we state that a certain compile-time type is expected we can use values that at run-time have exactly that type or any subtype of that type.</p>
</section>
<section id="upcasting-and-downcasting">
<span id="id2"></span><h3>Upcasting and downcasting<a class="headerlink" href="#upcasting-and-downcasting" title="Permalink to this heading">#</a></h3>
<p>The process of using a subtype where a supertype is expected is known as “upcasting”.
Upcasting can in an object oriented language usually be performed without any explicit <span class="xref myst">type conversions</span>.
The code below gives two examples of upcasting.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IAnimal</span><span class="w"> </span><span class="n">animal1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="n">IAnimal</span><span class="w"> </span><span class="n">animal2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>The process of using a supertype where a subtype is expected is known as “downcasting”.
Downcasting in an object oriented language usually requires an explicit <span class="xref myst">type conversion</span>.
Below are two examples of downcasting where we are using two different syntaxes to explicitly cast from the supertype to a subtype.</p>
<p>The difference between the two casting syntaxes is that one returns <code class="docutils literal notranslate"><span class="pre">null</span></code> if the conversion is unsuccessful and the other throws an exception.
More on that in the chapter on <span class="xref myst">object type conversions</span>.</p>
<p>Let’s assume that we’ve got a variable whose compile-time type is <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> but that references an object whose runtime-type is <code class="docutils literal notranslate"><span class="pre">Cat</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IAnimal</span><span class="w"> </span><span class="n">animal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>Since the run-time type actually is a <code class="docutils literal notranslate"><span class="pre">Cat</span></code>, we should be able to downcast from the type <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> to the type <code class="docutils literal notranslate"><span class="pre">Cat</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Downcasting to Cat with null on failure.</span>
<span class="n">Cat</span><span class="w"> </span><span class="n">cat1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">animal</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Cat</span><span class="p">;</span>

<span class="c1">// Downcasting to Cat with exception on failure.</span>
<span class="n">Cat</span><span class="w"> </span><span class="n">cat2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Cat</span><span class="p">)</span><span class="n">animal</span><span class="p">;</span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">cat1</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">cat2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Submission#3+Cat
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Submission#3+Cat
</pre></div>
</div>
</div>
</div>
<p>Ok, so that worked.
Let’s now try to downcast from the type <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> to the type <code class="docutils literal notranslate"><span class="pre">Dog</span></code>.
This should not work since the run-time type of our object actually is <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and <code class="docutils literal notranslate"><span class="pre">Cat</span></code> is not convertible to <code class="docutils literal notranslate"><span class="pre">Dog</span></code>.</p>
<p>If we use the syntax that gives us <code class="docutils literal notranslate"><span class="pre">null</span></code> on a failed conversion then we expect to get <code class="docutils literal notranslate"><span class="pre">null</span></code>.
Indeed we do.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Downcasting to Dog with null on failure.</span>
<span class="n">Dog</span><span class="w"> </span><span class="n">dog1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">animal</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Dog</span><span class="p">;</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">dog1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>If we use the syntax that throws an exception on a failed conversion then we expect to get an exception.
Indeed we do.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Downcasting to Dog with exception on failure.</span>
<span class="n">Dog</span><span class="w"> </span><span class="n">dog2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Dog</span><span class="p">)</span><span class="n">animal</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>System.InvalidCastException: Unable to cast object of type &#39;Cat&#39; to type &#39;Dog&#39;.
   at Submission#9.&lt;&lt;Initialize&gt;&gt;d__0.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.CodeAnalysis.Scripting.ScriptExecutionState.RunSubmissionsAsync[TResult](ImmutableArray`1 precedingExecutors, Func`2 currentExecutor, StrongBox`1 exceptionHolderOpt, Func`2 catchExceptionOpt, CancellationToken cancellationToken)
   at Submission#9.&lt;&lt;Initialize&gt;&gt;d__0.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.CodeAnalysis.Scripting.ScriptExecutionState.RunSubmissionsAsync[TResult](ImmutableArray`1 precedingExecutors, Func`2 currentExecutor, StrongBox`1 exceptionHolderOpt, Func`2 catchExceptionOpt, CancellationToken cancellationToken)
</pre></div>
</div>
</div>
</div>
<p>Why is the conversion from <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> to <code class="docutils literal notranslate"><span class="pre">Cat</span></code> successful when the conversion to <code class="docutils literal notranslate"><span class="pre">Dog</span></code> is not?
Upcasting is always safe because subtypes can always be treated as their supertypes.
Downcasting is however <strong>not necessarily safe</strong>.
Downcasting <em>only</em> works if the run-time type that we happen to have on the right-hand side actually <em>is</em> substitutable for the compile-time type on the left-hand side.</p>
<p>In the case above, we were allowed to treat our object as an object of type <code class="docutils literal notranslate"><span class="pre">Cat</span></code> since the run-time type of our object actually happened to be <code class="docutils literal notranslate"><span class="pre">Cat</span></code>.
We were however not able to treat our object as an object of type <code class="docutils literal notranslate"><span class="pre">Dog</span></code> since the run-time type <code class="docutils literal notranslate"><span class="pre">Dog</span></code> is <em>not</em> substitutable for <code class="docutils literal notranslate"><span class="pre">Cat</span></code>.</p>
<p>Perhaps you remember that in the chapter on <span class="xref myst">data types</span> we mentioned that any instance of a class in C# can be assigned to a variable of type <code class="docutils literal notranslate"><span class="pre">object</span></code>?
The reason that this works is that all classes in C# are implicitly made subtypes of the type <code class="docutils literal notranslate"><span class="pre">object</span></code>.
Specifically, this happens through the mechanism of <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inheritance</span></a> which we’ll talk about very soon.
Assigning an instance of a class to a variable of type <code class="docutils literal notranslate"><span class="pre">object</span></code> is consequently yet another example of “upcasting”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">object</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="tip admonition">
<p class="admonition-title">Mnemonic</p>
<p>How to remember which is which of upcasting and downcasting?
When we’re visualizing a subtype relationship between two types using UML class diagrams (see the UML section in the chapter on <span class="xref myst">interfaces</span> or <span class="xref myst">inheritance</span>) is to remember that, when visualizing, we usually draw the supertype above the suptype.</p>
<p>Upcasting refers to the process of treating an object of the type below as an object of the type above.
Downcasting refers to the process of treating an object of the type above as an object of the type below.
In upcasting we’re converting “up”.
In downcasting we’re converting “down”.</p>
</div>
</section>
<section id="nominal-subtyping">
<h3>Nominal subtyping<a class="headerlink" href="#nominal-subtyping" title="Permalink to this heading">#</a></h3>
<p>Remember how we, in the chapter on <span class="xref myst">type systems</span>, discussed that a type system is either nominal, structural or some combination of the two.
If a type system is nominal, then subtyping is determined based on the fact that we declare that it is.
In a structural type system however, subtyping is determined on the basis of the structure of different types.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>C# is a nominally typed language, and hence implements nominal subtyping.
A subtype is a subtype if we nominally declare that it is.</p>
</div>
<p>Unfortunately, the existence of <a class="reference internal" href="../chapters/basic-exceptions.html#exceptions"><span class="std std-ref">exceptions</span></a> means that it is quite simple to nominally declare that something is a subtype yet structurally violate the rules of, what is known as, “behavioral subtyping”.
More on this in the chapter on the <a class="reference internal" href="liskov-substitution-principle.html#liskov-substitution-principle"><span class="std std-ref">Liskov substitution principle</span></a> (LSP).</p>
<p>Type systems that implement structural subtyping often need to deal with whether or not to support both “width subtyping” and “depth subtyping”.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The static type checker <a class="reference external" href="https://flow.org">Flow</a> for the language JavaScript is an example of a type system that supports both depth subtyping and width subtyping.</p>
</div>
</section>
<section id="dynamic-dispatch">
<span id="id3"></span><h3>Dynamic dispatch<a class="headerlink" href="#dynamic-dispatch" title="Permalink to this heading">#</a></h3>
<p>But what does all this matter you ask?
Why would I want to “treat” cats and dogs as animals instead of as cats and dogs?
Well, the answer lies in something known as “dynamic dispatch”.</p>
<p>By declaring that <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and <code class="docutils literal notranslate"><span class="pre">Dog</span></code> both implement the interface <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> we can use <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> as the compile-time type.
Importantly we can call whatever methods and access whatever properties the type <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> declares.
However, we can do this without having to care at all about which particular implementation of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> we happen to get at runtime.
As long as whatever members we’re accessing are defined in <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> then we are guaranteed that these members will be available in all subtypes of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Which implementation is executed is determined by the <em>run-time type</em> not the compile-time type.</p>
</div>
<p>Before leaving the section on dynamic dispatch I should also mention that most languages that implement dynamic dispatch by means of subtype polymorphism provide us with <em>single</em> dynamic dispatch.
This means that the implementation that is executed depends on the run-time type of one variable.
We will learn about <em>multiple</em> dynamic dispatch in the chapters on <span class="xref myst">visitor pattern</span> and <span class="xref myst">pattern matching</span>.</p>
</section>
<section id="constructors">
<h3>Constructors<a class="headerlink" href="#constructors" title="Permalink to this heading">#</a></h3>
<p>It is important to understand that subtype polymorphism doesn’t require constructors to have any particular signature.
As we will see in the chapter on <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inheritance</span></a>, inheriting from a class will force you to call one of the base classes constructors (albeit possibly implicitly) but you’re nevertheless able to define your own constructors in the subclass.
In the case of interfaces we’re only demanding that implementors define some public instance members.
The constructors can consequently vary wildly between different implementations of an interface.</p>
<p>Consider, for example, how the constructor of the class <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> and the constructor of <code class="docutils literal notranslate"><span class="pre">Circle</span></code> have different parameter lists even though both classes implement the same interface and thus are subtypes of that interface.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">IShape</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">Area</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Rectangle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IShape</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Area</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Height</span><span class="p">;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="k">value</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Rectangle</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">height</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">Width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">width</span><span class="p">;</span>
<span class="w">    </span><span class="n">Height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">height</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IShape</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Radius</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Diameter</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Radius</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Width</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Diameter</span><span class="p">;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Diameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Diameter</span><span class="p">;</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Diameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">Area</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">PI</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Pow</span><span class="p">(</span><span class="n">Radius</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">);</span>
<span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Sqrt</span><span class="p">(</span><span class="n">Area</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">PI</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Circle</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">radius</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Radius</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">radius</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IShape</span><span class="w"> </span><span class="n">shape1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Circle</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>
<span class="n">IShape</span><span class="w"> </span><span class="n">shape2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rectangle</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="beyond-inclusion">
<h3>Beyond inclusion<a class="headerlink" href="#beyond-inclusion" title="Permalink to this heading">#</a></h3>
<p>In the chapter on <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interfaces</span></a> and here we’ve emphasized the importance of letting the supertype be the <a class="reference internal" href="../chapters/sets.html#intersection"><span class="std std-ref">intersection</span></a> of all the subtypes, not the <a class="reference internal" href="../chapters/sets.html#union"><span class="std std-ref">union</span></a> of them.
Otherwise we would force subtypes to provide implementations for members they have no sensible implementation for.
This is a path that leads to a sea of run-time errors.
So let us agree to stray away before it is too late.</p>
<p>Why would you get the idea that you should put members that are exclusive to some set of subtypes in the supertype?
Well, when we treat something as it’s supertype then we can <em>only</em> access whatever members are defined in that supertype.
It doesn’t matter what additional members might exist in the subtype.
We only know about what’s in the compile-time type.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">Generalization</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">void</span><span class="w"> </span><span class="nf">SharedMethod</span><span class="w"> </span><span class="p">();</span>
<span class="p">}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Specialization</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Generalization</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">SharedMethod</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">UniqueMethod</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Specialization</span><span class="w"> </span><span class="n">special</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Specialization</span><span class="p">();</span>
<span class="n">special</span><span class="p">.</span><span class="n">SharedMethod</span><span class="p">();</span><span class="w"> </span><span class="c1">// Ok.</span>
<span class="n">special</span><span class="p">.</span><span class="n">UniqueMethod</span><span class="p">();</span><span class="w"> </span><span class="c1">// Ok.</span>

<span class="n">Generalization</span><span class="w"> </span><span class="n">general</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Specialization</span><span class="p">();</span>
<span class="n">general</span><span class="p">.</span><span class="n">SharedMethod</span><span class="p">();</span><span class="w"> </span><span class="c1">// Ok.</span>
<span class="n">general</span><span class="p">.</span><span class="n">UniqueMethod</span><span class="p">();</span><span class="w"> </span><span class="c1">// Does not compile!</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(7,9): error CS1061: &#39;Generalization&#39; does not contain a definition for &#39;UniqueMethod&#39; and no accessible extension method &#39;UniqueMethod&#39; accepting a first argument of type &#39;Generalization&#39; could be found (are you missing a using directive or an assembly reference?)
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<p>When you treat a subtype as a supertype you loose the ability to call methods that only exist in the subtype.
Said differently, it is possible for the subtype to define members that fall outside the inclusion relationship.
It is possible for the subtype to, outside of its inclusion relationship, be an extension of the supertype.
It is possible for the subtype to, outside of its inclusion relationship, do more than the supertype.
An even other way of saying this is it is possible that it is a <em>part</em> of the subtype that makes it a subtype of the supertype.</p>
<p>We’ll talk about this a bit more when we get to the chapter on the design principle known as the <a class="reference internal" href="liskov-substitution-principle.html#liskov-substitution-principle"><span class="std std-ref">liskov substitution principle</span></a>.
As long as the subtype is behaviorally substitutable for the supertype, we’re fione.
But, be sure to only put things in the supertype that actually are implementable for all conceivable subtypes.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>What members the compiler allows us to invoke is determined by the compile-time type and <em>not</em> the run-time type.</p>
</div>
</section>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h2>
<section id="numbers">
<h3>Numbers<a class="headerlink" href="#numbers" title="Permalink to this heading">#</a></h3>
<p>In actual languages like C#, different number types are usually not subtypes of each other.
However, let us dispense with that practicality for a moment so that we can deepen our understanding of subtypes.</p>
<p>If we’re talking about sets, then the set of natural numbers is a subset of the set of integers, which is a subset of the set of rational numbers, which is a subset of the set of real numbers.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[
\mathbb{N} \subset \mathbb{Z} \quad \quad \quad
\mathbb{Z} \subset \mathbb{Q} \quad \quad \quad
\mathbb{Q} \subset \mathbb{R}
\]</div>
</div>
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="https://upload.wikimedia.org/wikipedia/commons/1/17/Number-systems.svg"><img alt="https://upload.wikimedia.org/wikipedia/commons/1/17/Number-systems.svg" height="200" src="https://upload.wikimedia.org/wikipedia/commons/1/17/Number-systems.svg" /></a>
<figcaption>
<p><span class="caption-text">Illustration of how real numbers (<span class="math notranslate nohighlight">\(\mathbb{R}\)</span>) include rational numbers (<span class="math notranslate nohighlight">\(\mathbb{Q}\)</span>), which include integers (<span class="math notranslate nohighlight">\(\mathbb{Z}\)</span>), which include natural numbers (<span class="math notranslate nohighlight">\(\mathbb{N}\)</span>). [<a class="reference external" href="https://en.wikipedia.org/wiki/Real_number#/media/File:Number-systems.svg">Image source</a>].</span><a class="headerlink" href="#id9" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>If we’re talking about types then it would be quite reasonable to design a type system where the natural numbers (<code class="docutils literal notranslate"><span class="pre">Natural</span></code>) is a subtype of integers (<code class="docutils literal notranslate"><span class="pre">Integer</span></code>), which is a subtype of rational numbers (<code class="docutils literal notranslate"><span class="pre">Rational</span></code>), which is a subtype of real numbers (<code class="docutils literal notranslate"><span class="pre">Real</span></code>).
C# does not have types like these, but bear with me.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Natural</span> <span class="p">:</span> <span class="n">Integer</span>
<span class="n">Integer</span> <span class="p">:</span> <span class="n">Rational</span>
<span class="n">Rational</span> <span class="p">:</span> <span class="n">Real</span>
</pre></div>
</div>
<p>Such a type system would imply that any value of type <code class="docutils literal notranslate"><span class="pre">Natural</span></code> can be used whenever you expect a value of type <code class="docutils literal notranslate"><span class="pre">Integer</span></code>, <code class="docutils literal notranslate"><span class="pre">Rational</span></code>, or <code class="docutils literal notranslate"><span class="pre">Real</span></code>.
Since subtyping is a transitive relationship, <code class="docutils literal notranslate"><span class="pre">Natural</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">Real</span></code>.
Since all natural numbers behave like integers, rationals, and reals defining a subtype relation like this seems entirely fine.
Of course, the relationship is directed and so we can’t go the other way.
Trying to use a value of type <code class="docutils literal notranslate"><span class="pre">Real</span></code> where a value of type <code class="docutils literal notranslate"><span class="pre">Natural</span></code> does not type-check since <code class="docutils literal notranslate"><span class="pre">Real</span></code> is not a subtype of <code class="docutils literal notranslate"><span class="pre">Natural</span></code>.</p>
</section>
<section id="animals">
<h3>Animals<a class="headerlink" href="#animals" title="Permalink to this heading">#</a></h3>
<p>Let’s declare an interface <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code> and two classes <code class="docutils literal notranslate"><span class="pre">Cat</span></code> and <code class="docutils literal notranslate"><span class="pre">Dog</span></code> that we declare as subtypes of <code class="docutils literal notranslate"><span class="pre">IAnimal</span></code>.
Let’s ignore implementations for now and just make sure that our types make sense.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">IAnimal</span><span class="w"> </span><span class="p">{}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IAnimal</span><span class="w"> </span><span class="p">{}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Dog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IAnimal</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</div>
</div>
<p>With this code in place we can actually compile and run the code above where we declare the variables <code class="docutils literal notranslate"><span class="pre">a1</span></code> and <code class="docutils literal notranslate"><span class="pre">a2</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IAnimal</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="n">IAnimal</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<p>Remember: The run-time type of these two variables is the type on the right.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a1</span><span class="p">.</span><span class="n">GetType</span><span class="p">());</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">a2</span><span class="p">.</span><span class="n">GetType</span><span class="p">());</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Cat</span>
<span class="go">Dog</span>
</pre></div>
</div>
</section>
<section id="ciphers">
<h3>Ciphers<a class="headerlink" href="#ciphers" title="Permalink to this heading">#</a></h3>
<p>Let’s get back to our ciphers and explore the power of dynamic dispatch and subtype polymorphism.
In the chapter on <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interfaces</span></a> we designed the three interfaces <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code>, <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code>, and <code class="docutils literal notranslate"><span class="pre">ICharToStringCipher</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">ICharToCharCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">interface</span><span class="w"> </span><span class="n">IStringToStringCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">interface</span><span class="w"> </span><span class="n">ICharToStringCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>We then showed that <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code>, <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>, and <code class="docutils literal notranslate"><span class="pre">ReverseCipher</span></code> all (at least) implement the interface <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">RobbersCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICharToStringCipher</span><span class="p">,</span><span class="w"> </span><span class="n">IStringToStringCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">RobbersCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">vowel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">consonants</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;BCDFGHJKLMNPQRSTVXYZ&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">consonants</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}{vowel}{input}&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">letter</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">letter</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CaesarCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICharToCharCipher</span><span class="p">,</span><span class="w"> </span><span class="n">IStringToStringCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">alphabet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVXYZ&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">newIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">newIndex</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">newIndex</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">IsLower</span><span class="p">(</span><span class="n">input</span><span class="p">))</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToLower</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">]);</span>
<span class="w">      </span><span class="k">else</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">letter</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Encode</span><span class="p">(</span><span class="n">letter</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ReverseCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IStringToStringCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">input</span><span class="p">.</span><span class="n">Length</span><span class="o">-</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&gt;=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>In this chapter we’ve emphaiszed that you can only access whatever members are defined in the supertype whenever you treat something as its supertype.
Let’s look at what this means in the context of our ciphers.</p>
<p>Take the Robber’s cipher for example.
Let’s say we want to be able to change the vowel that any particular instance of <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> uses.
Let’s say that we want to implement that idea using a public <a class="reference internal" href="properties.html"><span class="doc std std-doc">property</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">RobbersCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICharToStringCipher</span><span class="p">,</span><span class="w"> </span><span class="n">IStringToStringCipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// This line is new!</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">RobbersCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">consonants</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;BCDFGHJKLMNPQRSTVXYZ&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">consonants</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}{Vowel}{input}&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">letter</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">letter</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Clearly we cannot add this property to neither the interface <code class="docutils literal notranslate"><span class="pre">ICharToStringCipher</span></code> nor <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> since not all ciphers are centered around the idea of a vowel.
However, as long as <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> still implement all members of the interfaces we declare it to be a member of, then we are free to add as many additional members as we want.
<code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> can now do <em>more</em> than what is required for being an implementation of <code class="docutils literal notranslate"><span class="pre">ICipher</span></code>.</p>
<p>If we’ve got an instance of <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> where the compile-time type also is <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> then we can access the <code class="docutils literal notranslate"><span class="pre">Vowel</span></code> property to change the vowel.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">RobbersCipher</span><span class="w"> </span><span class="n">cipher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RobbersCipher</span><span class="p">(</span><span class="sc">&#39;o&#39;</span><span class="p">);</span>
<span class="n">cipher</span><span class="p">.</span><span class="n">Vowel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<p>However, if the compile-time type of our variable is, for example, <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> then we can <em>not</em> access the <code class="docutils literal notranslate"><span class="pre">Vowel</span></code> property.
The compiler error that we get is actually quite revealing.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IStringToStringCipher</span><span class="w"> </span><span class="n">cipher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RobbersCipher</span><span class="p">(</span><span class="sc">&#39;o&#39;</span><span class="p">);</span>
<span class="n">cipher</span><span class="p">.</span><span class="n">Vowel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2,8): error CS1061: &#39;IStringToStringCipher&#39; does not contain a definition for &#39;Vowel&#39; and no accessible extension method &#39;Vowel&#39; accepting a first argument of type &#39;IStringToStringCipher&#39; could be found (are you missing a using directive or an assembly reference?)
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
<p>The error tells us that if all the type-checker knows is that it has something of type <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> then it couldn’t possibly guarantee that we can access a property called <code class="docutils literal notranslate"><span class="pre">Vowel</span></code>.
Why?
Well because <code class="docutils literal notranslate"><span class="pre">Vowel</span></code> is not actually defined in <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code>.
The interface <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> knows absolutely nothing about vowels.
Only one of the bazillion different possible implementations of <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code>, namely <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code>, happens to know about vowels.</p>
</section>
<section id="id4">
<h3>Dynamic dispatch<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<p>But what do we even gain from this?
Well, this means that we can use all concrete types that implement the same interface interchangably.
It means that we can write code that depends on <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> instead of any particular class.</p>
<p>So what’s this business of dynamic dispatch?
Well, say that we write code that depends on <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> and then call the method <code class="docutils literal notranslate"><span class="pre">Encode</span></code> on an object of that type.
We don’t know whether that object is of type <code class="docutils literal notranslate"><span class="pre">ReverseCipher</span></code>, <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>, or any other potential cipher that we have yet to come up with.
The fact that the type implements <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> means that we can be certain that the object has a method with the signature <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">Encode</span> <span class="pre">(string</span> <span class="pre">input)</span></code> which means that we can call it.
The actual implementation of <code class="docutils literal notranslate"><span class="pre">Encode</span></code> that will be run depends on what the run-time type we happen to have.
This is the dynamic dispatch.
The implementation is “late-bound”.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Which implementation is executed is determined by the <em>run-time type</em> not the compile-time type.</p>
</div>
<p>Let’s look at an example.
How about the idea of running the encoding method of a cipher twice?
Let’s define two simple <a class="reference internal" href="../chapters/methods-old.html#local-functions"><span class="std std-ref">local functions</span></a>.
One that runs an <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> twice, and one that runs an <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code> twice.
We’ll get back to using classes soon, but let’s just start with something simple.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span><span class="w"> </span><span class="nf">encodeStringTwice</span><span class="w"> </span><span class="p">(</span><span class="n">IStringToStringCipher</span><span class="w"> </span><span class="n">cipher</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>

<span class="kt">char</span><span class="w"> </span><span class="nf">encodeCharTwice</span><span class="w"> </span><span class="p">(</span><span class="n">ICharToCharCipher</span><span class="w"> </span><span class="n">cipher</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span>
<span class="w">  </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<p>What’s excellent about these two methods is that they work on any current and future types that implement the corresponding interface.
Let’s take these methods for a spin to see if they actually work.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="w"> </span><span class="n">encodeStringTwice</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">RobbersCipher</span><span class="p">(</span><span class="sc">&#39;o&#39;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;Ape&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Apopopope
</pre></div>
</div>
</div>
</div>
<p>Now let’s try if we can pass the reversing cipher.
Of course, since reversing a string twice takes us back to the original string we should simply get the original string back.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="w"> </span><span class="n">encodeStringTwice</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ReverseCipher</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;backwards&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>backwards
</pre></div>
</div>
</div>
</div>
<p>Finally, let’s see what happens if we pass an object of type <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> to the method that encodes single characters twice.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="w"> </span><span class="n">encodeCharTwice</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C
</pre></div>
</div>
</div>
</div>
<p>Both methods seem to work.
Pretty neat right?</p>
<div class="admonition-key-point admonition">
<p class="admonition-title">Key point</p>
<p>Not only do these two methods work for all current implementations of our interfaces, but they will also work <strong>for all future implementations</strong> of the interface.</p>
</div>
<p>We can just keep on adding new classes and the methods <code class="docutils literal notranslate"><span class="pre">encodeStringTwice</span></code> and <code class="docutils literal notranslate"><span class="pre">encodeCharTwice</span></code> will work for all these classes so long as we make sure that they implement the appropriate interface.</p>
<p>This is subtype polymorphism and dynamic dispatch.
We’re treating different types as if they are of the same type.
We’re treating different types of ciphers as if they are all of the same type.</p>
</section>
<section id="subtype-polymorpism-identity-cipher">
<span id="identity-cipher"></span><h3>Identity cipher<a class="headerlink" href="#subtype-polymorpism-identity-cipher" title="Permalink to this heading">#</a></h3>
<p>While we’re at it, let’s also write the simplest possible cipher that we can image.
Namely a cipher that doesn’t actually perform any modifications of the input message but instead just returns it as it is.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">NoCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In general, something like a <code class="docutils literal notranslate"><span class="pre">NoCipher</span></code> is known as the “identity”.
In the context of ciphers, we would call this “the identity cipher”.
In the context of multiplication, the number <span class="math notranslate nohighlight">\(1\)</span> is the identity.
In the context of addition, the number <span class="math notranslate nohighlight">\(0\)</span> is the identity.</p>
<p>You can also think of <code class="docutils literal notranslate"><span class="pre">NoCipher</span></code> as a <span class="xref myst">null object</span> which we will talk more about when we get to design patterns.</p>
<p>Does the <code class="docutils literal notranslate"><span class="pre">encodeTwice</span></code> method work for instances of type <code class="docutils literal notranslate"><span class="pre">NoCipher</span></code> as well?
Yes, of course.</p>
<p>Welcome to the powerful world of subtype polymorphism.</p>
<figure class="margin align-default" id="id10">
<img alt="https://images-na.ssl-images-amazon.com/images/I/51ttgxwzArL._SY445_SX342_QL70_ML2_.jpg" src="https://images-na.ssl-images-amazon.com/images/I/51ttgxwzArL._SY445_SX342_QL70_ML2_.jpg" />
<figcaption>
<p><span class="caption-text">“Refactoring: Improving the design of existing code” <span id="id5">[<a class="reference internal" href="../chapters/bibliography.html#id8" title="M. Fowler. Refactoring: Improving the Design of Existing Code. Addison-Wesley object technology series. Addison-Wesley, 1999. ISBN 9780201485677. URL: https://geni.us/DABBqp.">Fowler, 1999</a>]</span>.</span><a class="headerlink" href="#id10" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="replace-conditional-with-polymorphism">
<span id="id6"></span><h3>Replace conditional with polymorphism<a class="headerlink" href="#replace-conditional-with-polymorphism" title="Permalink to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section will <em>not</em> be completed in the year 2022.
Please see the Preface, Foreword, and Chapter 2 of <span id="id7">Fowler [<a class="reference internal" href="../chapters/bibliography.html#id8" title="M. Fowler. Refactoring: Improving the Design of Existing Code. Addison-Wesley object technology series. Addison-Wesley, 1999. ISBN 9780201485677. URL: https://geni.us/DABBqp.">1999</a>]</span> or the newer edition <span id="id8">Fowler [<a class="reference internal" href="../chapters/bibliography.html#id9" title="M. Fowler. Refactoring: Improving the Design of Existing Code. Addison-Wesley Signature Series. Pearson Education, 2018. ISBN 9780134757704. URL: https://geni.us/k8KhT3.">2018</a>]</span>.</p>
</div>
</section>
</section>
<section id="discussion">
<h2>Discussion<a class="headerlink" href="#discussion" title="Permalink to this heading">#</a></h2>
<p>Not impressed enough yet?
Not a problem.
We’re only scratching the surface of the usefulness of subtype polymorphism.</p>
<p>As you will come to learn, subtype polymorphism is at the heart of almost all object oriented <span class="xref myst">design patterns</span> you will see how subtype polymorphism is the key mechanism of almost all object oriented design patterns.</p>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this heading">#</a></h2>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-0">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Assume that you have the following interface.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">IShape</span>
<span class="p">{</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">Width</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">Height</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">Area</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="k">void</span><span class="w"> </span><span class="nf">Scale</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">factor</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Write three classes <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code>, <code class="docutils literal notranslate"><span class="pre">RightTriangle</span></code>, and <code class="docutils literal notranslate"><span class="pre">Circle</span></code> that all implement the interface <code class="docutils literal notranslate"><span class="pre">IShape</span></code>.
When you’re done, you should be able to run the following code and get the same result.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">IShape</span><span class="p">[]</span><span class="w"> </span><span class="n">shapes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IShape</span><span class="p">[]</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">Rectangle</span><span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">),</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">RightTriangle</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">),</span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">Circle</span><span class="p">(</span><span class="m">2</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">IShape</span><span class="w"> </span><span class="n">shape</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">shapes</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shape</span><span class="p">.</span><span class="n">Area</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">    </span><span class="n">shape</span><span class="p">.</span><span class="n">Scale</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>
<span class="w">  </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;W={shape.Width}, H={shape.Height}, A={shape.Area}&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>W=5, H=2, A=10
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>W=4, H=2, A=4
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>W=4, H=4, A=12.566370614359172
</pre></div>
</div>
</div>
</div>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-1">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>If type <code class="docutils literal notranslate"><span class="pre">A</span></code> is a subset of type <code class="docutils literal notranslate"><span class="pre">B</span></code> then we would say that the set that models type <code class="docutils literal notranslate"><span class="pre">B</span></code> <em>includes</em> the set that models type <code class="docutils literal notranslate"><span class="pre">A</span></code>.
If we call the sets <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> then we could write: <span class="math notranslate nohighlight">\(A \subset B\)</span>.
What does it mean that <span class="math notranslate nohighlight">\(A\)</span> <em>includes</em> <span class="math notranslate nohighlight">\(B\)</span>?</p>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-2">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Assume that you have the following code:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Cat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Dog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">Animal</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Which of the following lines will compile and which ones will not?</p></li>
<li><p>Explain <em>why</em> each line will or will not compile.</p></li>
</ol>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="kt">var</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
<span class="kt">var</span><span class="w"> </span><span class="n">a3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Animal</span><span class="p">();</span>
<span class="n">Cat</span><span class="w"> </span><span class="n">a4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="n">Cat</span><span class="w"> </span><span class="n">a5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
<span class="n">Cat</span><span class="w"> </span><span class="n">a6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Animal</span><span class="p">();</span>
<span class="n">Dog</span><span class="w"> </span><span class="n">a7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="n">Dog</span><span class="w"> </span><span class="n">a8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
<span class="n">Dog</span><span class="w"> </span><span class="n">a9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Animal</span><span class="p">();</span>
<span class="n">Animal</span><span class="w"> </span><span class="n">a10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Cat</span><span class="p">();</span>
<span class="n">Animal</span><span class="w"> </span><span class="n">a11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">();</span>
<span class="n">Animal</span><span class="w"> </span><span class="n">a12</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Animal</span><span class="p">();</span>
</pre></div>
</div>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-3">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Which of the following types (if any) are supported by the method <code class="docutils literal notranslate"><span class="pre">encodeCharTwice</span></code>?</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ReverseCipher</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LeetCipher</span></code></p></li>
</ol>
<p>Note that we are talking about <code class="docutils literal notranslate"><span class="pre">encodeCharTwice</span></code> <em>not</em> <code class="docutils literal notranslate"><span class="pre">encodeStringTwice</span></code>.</p>
</section>
</div>
<div class="exercise admonition" id="ex:subtype-polymorphism:encodeNTimes">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Write a method with the following signature:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span><span class="w"> </span><span class="nf">encodeNTimes</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">IStringToStringCipher</span><span class="w"> </span><span class="n">cipher</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">times</span><span class="p">);</span>
</pre></div>
</div>
<p>The method should apply the same cipher multiple times to a single input.
The parameter <code class="docutils literal notranslate"><span class="pre">cipher</span></code> determines the cipher that should be used.
The parameter <code class="docutils literal notranslate"><span class="pre">times</span></code> determines how many times the cipher should be applied to the input string.
The parameter <code class="docutils literal notranslate"><span class="pre">input</span></code> determines the input to encode.</p>
<p>Since the method takes a cipher of type <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code> you must be able to run the method with any of your ciphers that implement that interface.</p>
<p>When you’re done you should be able to run the following code and get the corresponding output.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="w"> </span><span class="n">encodeNTimes</span><span class="p">(</span><span class="s">&quot;ABC&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DEF
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="w"> </span><span class="n">encodeNTimes</span><span class="p">(</span><span class="s">&quot;L&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RobbersCipher</span><span class="p">(</span><span class="sc">&#39;o&#39;</span><span class="p">),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LoLoLoL
</pre></div>
</div>
</div>
</div>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-5">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Is it possible to pass the class <code class="docutils literal notranslate"><span class="pre">LeetCipher</span></code> that you wrote in <code class="xref std std-numref docutils literal notranslate"><span class="pre">ex:interfaces:leet</span></code> to the method <code class="docutils literal notranslate"><span class="pre">encodeNTimes</span></code> that you wrote in <code class="xref std std-numref docutils literal notranslate"><span class="pre">ex:subtype-polymorphism:encodeNTimes</span></code>?
Why or why not?
If not, can we make it possible?</p>
</section>
</div>
<div class="exercise admonition" id="ex:subtype-polymorphism-own-types">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Come up with your own example of inclusion/subtying that involves at least three sets/types.
Explain why all members of each subtype is also a member of it’s supertype.</p>
</section>
</div>
<div class="exercise admonition" id="ex:subtype-polymorphism-implement-own-types">

<p class="admonition-title"></p>
<section id="exercise-content">
<ol class="arabic simple">
<li><p>Write an interface that unifies the three types you designed in <code class="xref std std-numref docutils literal notranslate"><span class="pre">ex:subtype-polymorphism-own-types</span></code>.</p></li>
<li><p>Declare at least one method/property to the interface.</p></li>
<li><p>All methods that the interface declares must make sense in all the implementations of the interface.</p></li>
<li><p>Write a class for each of the three types and make them implementations of the interface.</p></li>
<li><p>Show that they can be treated polymorphically by assigning instantiations of all three classes to variables with the interface as the compile-time type.</p></li>
</ol>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-8">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Start with the code you wrote in <code class="xref std std-numref docutils literal notranslate"><span class="pre">ex:subtype-polymorphism-implement-own-types</span></code>.
Write a static method that (1) takes at least one argument whose type is the interface you’ve defined and (2) calls a method or accesses a property that’s defined in that interface.</p>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-9">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Give an example of <em>subtype polymorphism</em> and <em>single dynamic dispatch</em> in code.
Use code comments when necessary to get your point across.</p>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-10">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Why is it important that the signature of constructors can vary freely between subtypes?</p>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-11">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>When we treat a subtype as a supertype, meaning when we let the compile-time type be the supertype, why can’t we call methods that are only defined in the subtype?</p>
</section>
</div>
<div class="exercise admonition" id="old/subtype-polymorphism-exercise-12">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Remember the class <code class="docutils literal notranslate"><span class="pre">Vowel</span></code> that we wrote when discsusing <a class="reference internal" href="constructors.html#constructors-private"><span class="std std-ref">private constructors</span></a>?
It looked something like this:</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Vowel</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">letter</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Private constructor</span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="nf">Vowel</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">letter</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span>
<span class="w">    </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">letter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">upper</span>
<span class="w">      </span><span class="o">?</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">letter</span><span class="p">)</span>
<span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToLower</span><span class="p">(</span><span class="n">letter</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Public static factory methods</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="nf">MakeA</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vowel</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">);</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="nf">MakeE</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vowel</span><span class="p">(</span><span class="sc">&#39;E&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">);</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="nf">MakeI</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vowel</span><span class="p">(</span><span class="sc">&#39;I&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">);</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="nf">MakeO</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vowel</span><span class="p">(</span><span class="sc">&#39;O&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">);</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="nf">MakeU</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vowel</span><span class="p">(</span><span class="sc">&#39;U&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">);</span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">Vowel</span><span class="w"> </span><span class="nf">MakeY</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">upper</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Vowel</span><span class="p">(</span><span class="sc">&#39;Y&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">upper</span><span class="p">);</span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">ToChar</span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">letter</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details>
</div>
<p>Rewrite the class so that each vowel is its own subtype of <code class="docutils literal notranslate"><span class="pre">IVowel</span></code>.
When you are done you should no longer need the static factory methods but you should still catch all errors related to trying to create a vowel from a non-vowel character at compile-time.</p>
</section>
</div>
<div class="exercise admonition" id="ex:subtype-polymorphism:time">

<p class="admonition-title"></p>
<section id="exercise-content">
<p>Write a bunch of classes that can be used to model time in seconds, minutes, and hours.
Make sure that your code behaves according to the usage example below.</p>
<p>Hint: Consider converting to the base unit (seconds) before performing other conversions to avoid duplication.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">void</span><span class="w"> </span><span class="nf">printTime</span><span class="w"> </span><span class="p">(</span><span class="n">Time</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">Seconds</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">ToSeconds</span><span class="p">();</span>
<span class="w">  </span><span class="n">Minutes</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">ToMinutes</span><span class="p">();</span>
<span class="w">  </span><span class="n">Hours</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="n">ToHours</span><span class="p">();</span>
<span class="w">  </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">$&quot;{s.Number}s = {m.Number}mins = {h.Number}hrs.&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">printTime</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Seconds</span><span class="p">(</span><span class="m">4500</span><span class="p">));</span>
<span class="n">printTime</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Hours</span><span class="p">(</span><span class="m">0.75</span><span class="p">));</span>
<span class="n">printTime</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Minutes</span><span class="p">(</span><span class="m">15</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4500s = 75mins = 1.25hrs.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2700s = 45mins = 0.75hrs.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>900s = 15mins = 0.25hrs.
</pre></div>
</div>
</div>
</div>
<p>Rember the maxim <span class="xref myst">types over tests</span>.
Illegal states should not be representable.</p>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: ".net-csharp"
        },
        kernelOptions: {
            name: ".net-csharp",
            path: "./old"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = '.net-csharp'</script>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; All rights reserved. By using this site, you agree to our use of cookies for Google Analytics.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Subtype polymorphism</a><ul>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#definition">Definition</a><ul>
<li><a class="reference internal" href="#inclusion">Inclusion</a></li>
<li><a class="reference internal" href="#notation">Notation</a></li>
<li><a class="reference internal" href="#substitutability">Substitutability</a></li>
<li><a class="reference internal" href="#upcasting-and-downcasting">Upcasting and downcasting</a></li>
<li><a class="reference internal" href="#nominal-subtyping">Nominal subtyping</a></li>
<li><a class="reference internal" href="#dynamic-dispatch">Dynamic dispatch</a></li>
<li><a class="reference internal" href="#constructors">Constructors</a></li>
<li><a class="reference internal" href="#beyond-inclusion">Beyond inclusion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#numbers">Numbers</a></li>
<li><a class="reference internal" href="#animals">Animals</a></li>
<li><a class="reference internal" href="#ciphers">Ciphers</a></li>
<li><a class="reference internal" href="#id4">Dynamic dispatch</a></li>
<li><a class="reference internal" href="#subtype-polymorpism-identity-cipher">Identity cipher</a></li>
<li><a class="reference internal" href="#replace-conditional-with-polymorphism">Replace conditional with polymorphism</a></li>
</ul>
</li>
<li><a class="reference internal" href="#discussion">Discussion</a></li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://www.googletagmanager.com/gtag/js?id=G-V69WNXD095"></script>
    <script src="../_static/custom.js"></script>
    <script src="../_static/analytics.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>