
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>78. Variance &#8212; The Object Oriented Way (DRAFT)</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="79. Liskov substitution principle" href="liskov-substitution-principle.html" />
    <link rel="prev" title="77. Abstract injected object composition" href="abstract-injected-object-composition.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-V69WNXD095"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-V69WNXD095');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">The Object Oriented Way (DRAFT)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Fundamentals
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="sets.html">
   1. ★ Sets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functions.html">
   2. ★ Functions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Terminals
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="terminals.html">
   3. Terminals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="standard-out.html">
   4. Standard out
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="standard-in.html">
   5. Standard in
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Computation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="algorithms.html">
   6. ★ Algorithms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="computation.html">
   7. ★ Computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="syntax.html">
   8. ★ Syntax
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="semantics.html">
   9. ★ Semantics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="compilation.html">
   10. ★ Compilation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="execution.html">
   11. ★ Execution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interpretation.html">
   12. ★ Interpretation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="comments.html">
   13. ★ Comments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Values
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="values.html">
   14. ★ Values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="variables.html">
   15. ★ Variables
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statements &amp; expressions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="statements.html">
   16. Statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="expressions.html">
   17. Expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="operators.html">
   18. Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="paradigms.html">
   19. Paradigms
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-types.html">
   20. ★ Data types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-conversions.html">
   21. Type conversions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-checking.html">
   22. ★ Type-checking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-systems.html">
   23. ★ Type systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-hierarchies.html">
   24. Type hierarchies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-testing.html">
   25. Type testing
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basic types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="simple-types.html">
   26. Simple types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="enums.html">
   27. Enums
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="value-tuples.html">
   28. Value tuples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="arrays.html">
   29. Arrays
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Control flow
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="selection.html">
   30. ★ Selection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iteration.html">
   31. ★ Iteration
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Input/output
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="command-line-arguments.html">
   32. Command line arguments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Mutability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="mutability.html">
   33. Mutability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="immutable-objects.html">
   34. Immutable objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="value-and-reference-semantics.html">
   35. Value and reference semantics
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Nothingness
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="nothingness.html">
   36. ★ Nothingness
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Procedures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="methods.html">
   37. ★ Methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="method-composition.html">
   38. Method composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-classes.html">
   39. Static classes (Modules)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-methods.html">
   40. ★ Static methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-variables.html">
   41. Static variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-constructors.html">
   42. Static constructors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="purity.html">
   43. Purity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="overloading.html">
   44. ★ Overloading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="recursion.html">
   45. Recursion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modules
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-structures.html">
   46. Data structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scope.html">
   47. Scope
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="namespaces.html">
   48. Namespaces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exceptions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="basic-exceptions.html">
   49. Exceptions (part 1)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stack-traces.html">
   50. Stack traces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Requirements
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="requirements.html">
   51. ★ Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="validation.html">
   52. Validation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="verification.html">
   53. Verification
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Maintainability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="maintainability.html">
   54. ★ Maintainability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="refactoring.html">
   55. (★E) Refactoring
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coupling.html">
   56. Coupling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dont-repeat-yourself.html">
   57. Don’t repeat yourself
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fail-fast.html">
   58. ★ Fail fast
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Objects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="objects.html">
   59. ★ Objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="classes.html">
   60. ★ Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fields.html">
   61. ★ Fields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="instance-methods.html">
   62. ★ Instance methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="basic-access-modifiers.html">
   63. ★ Access modifiers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="constructors.html">
   64. ★ Constructors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="properties.html">
   65. ★ Properties
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="extension-methods.html">
   66. Extension methods
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Concrete object composition
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="object-composition.html">
   67. ★ Object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concrete-constructed-object-composition.html">
   68. ★ Concrete constructed object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concrete-injected-object-composition.html">
   69. ★ Concrete injected object composition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Subtype polymorphism
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="interfaces.html">
   70. ★ Interfaces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="subtype-polymorphism.html">
   71. ★ Subtype polymorphism
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inheritance.html">
   72. ★ Inheritance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-classes.html">
   73. ★ Abstract classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="advanced-access-modifiers.html">
   74. Access modifiers (advanced)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="object-type-conversions.html">
   75. Type conversions (of objects)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Abstract object composition
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-constructed-object-composition.html">
   76. ★ Abstract constructed object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-injected-object-composition.html">
   77. ★ Abstract injected object composition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Substitutability
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   78. ★ Variance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="liskov-substitution-principle.html">
   79. ★ Liskov substitution principle
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Generics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="generics.html">
   80. ★ Generics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-type-parameters.html">
   81. ★ Generic type parameters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-types.html">
   82. ★ Generic types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-methods.html">
   83. Generic methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-parameter-constraints.html">
   84. Type parameter constraints
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="variant-generic-interfaces.html">
   85. ★ Variant generic interfaces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Principles
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design-principles.html">
   86. Design principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="types-over-tests.html">
   87. (★E) Types over tests
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="single-responsibility-principle.html">
   88. Single responsibility principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interface-segregation-principle.html">
   89. (★E) Interface segregation principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deep-classes.html">
   90. Deep classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="define-errors-out-of-existence.html">
   91. Define errors out of existence
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="open-closed-principle.html">
   92. (★E) Open-closed principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dependency-inversion-principle.html">
   93. (★E) Dependency inversion principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="composition-over-inheritance.html">
   94. (★E) Composition over inheritance
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Design patterns
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design-patterns.html">
   95. Design patterns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="strategy-pattern.html">
   96. ★ Strategy pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="null-object-pattern.html">
   97. Null object pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bridge-pattern.html">
   98. ★ Bridge pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="delegates.html">
   99. ★ Delegates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="observer-pattern.html">
   100. ★ Observer pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="events.html">
   101. ★ Events
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="adapter-pattern.html">
   102. Adapter pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="factory-method-pattern.html">
   103. ★ Factory method pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="composite-pattern.html">
   104. Composite pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="state-pattern.html">
   105. State pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iterator-pattern.html">
   106. Iterator pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="visitor-pattern.html">
   107. Visitor pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pattern-matching.html">
   108. Pattern matching
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lambdas
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lambdas.html">
   109. Lambdas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linq.html">
   110. LINQ
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  TODO
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="code-smells.html">
   111. Code smells and anti-patterns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="enumerators.html">
   112. Enumerators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indexers.html">
   113. Indexers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="streams.html">
   114. Streams
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="custom-exceptions.html">
   115. Custom exceptions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="prototypes.html">
   116. Prototypes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="base-class-library.html">
   117. Base class library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="boxing.html">
   118. Boxing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="structure-types.html">
   119. Structure types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="anonymous-types.html">
   120. Anonymous types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstraction.html">
   121. Abstraction / Modeling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indirection.html">
   122. Indirection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business-logic.html">
   123. Business logic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business-objects.html">
   124. Business objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="debugging.html">
   125. Debugging
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Epilogue
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="reading.html">
   Suggested reading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/chrokh/the-oo-way/main?urlpath=tree/docs/chapters/variance.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/chrokh/the-oo-way/issues/new?title=Issue%20on%20page%20%2Fchapters/variance.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/chapters/variance.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="../_sources/chapters/variance.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   78.1. Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   78.2. Definition
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#covariance">
     78.2.1. Covariance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contravariance">
     78.2.2. Contravariance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     78.2.3. Variance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bivariance">
     78.2.4. Bivariance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#invariance">
     78.2.5. Invariance
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example">
   78.3. Example
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#robustness-principle">
     78.3.1. Robustness principle
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#covariant-return-types">
     78.3.2. Covariant return types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   78.4. Exercises
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Variance</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   78.1. Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   78.2. Definition
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#covariance">
     78.2.1. Covariance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#contravariance">
     78.2.2. Contravariance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     78.2.3. Variance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bivariance">
     78.2.4. Bivariance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#invariance">
     78.2.5. Invariance
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#example">
   78.3. Example
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#robustness-principle">
     78.3.1. Robustness principle
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#covariant-return-types">
     78.3.2. Covariant return types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   78.4. Exercises
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="variance">
<h1><span class="section-number">78. </span>Variance<a class="headerlink" href="#variance" title="Permalink to this headline">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Work in progress.</p>
</div>
<section id="motivation">
<h2><span class="section-number">78.1. </span>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">#</a></h2>
<p>Having learned about subtype polymorphism we are now accustomed to the idea that a more specific type (such as a <code class="docutils literal notranslate"><span class="pre">Cat</span></code>) can be used in place of a more general type (such as an <code class="docutils literal notranslate"><span class="pre">Animal</span></code>).
We think of this as <code class="docutils literal notranslate"><span class="pre">Cat</span></code> being a subtype of <code class="docutils literal notranslate"><span class="pre">Animal</span></code> and of <code class="docutils literal notranslate"><span class="pre">Animal</span></code> being substitutable with <code class="docutils literal notranslate"><span class="pre">Cat</span></code>.</p>
<p>However, as soon as you use an instance of one type inside of an instance of another type (possibly through <a class="reference internal" href="object-composition.html"><span class="doc std std-doc">object composition</span></a>) we are forced to ask <em>how subtyping composes</em>.
This is the question of variance.
What are the subtyping rules for a type that uses instances of another type (possibly through object composition).</p>
<p>This has consequences for both subtyping of non-generic types (meaning the kind of types that we’ve talked about up to this point) and for generic types.</p>
<p>In this chapter we will iron out the variance terminology.
We will then use this terminology in the chapters on <a class="reference internal" href="liskov-substitution-principle.html#liskov-substitution-principle"><span class="std std-ref">Liskov substitution principle</span></a> and <a class="reference internal" href="variant-generic-interfaces.html"><span class="doc std std-doc">variant generic interfaces</span></a>.</p>
</section>
<section id="definition">
<h2><span class="section-number">78.2. </span>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">#</a></h2>
<p>If a type is used within another type as instance field, an instance property, as a parameter to an instance method, or as the return type of an instance method, then we would say that the first type <em>uses</em> the second.
<a class="reference internal" href="object-composition.html"><span class="doc std std-doc">Object composition</span></a> is a stronger claim since we then claim that the used object is stored in an instance field or an instance property.
If we simply say that one object <em>uses</em> another object we are merely claiming that objects of the first type, somehow, at some point, and for some time, might have access to instances of the second type.
The relationship between the user and the used may be ephemeral.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Variance deals with the questions of how subtyping composes.</p>
</div>
<p>If type <code class="docutils literal notranslate"><span class="pre">I</span></code> is using type <code class="docutils literal notranslate"><span class="pre">A</span></code>, in the sense above, then we say that <code class="docutils literal notranslate"><span class="pre">A</span></code> must be invariant, covariant, contravariant, or bivariant with respect to <code class="docutils literal notranslate"><span class="pre">I</span></code>.
This question regards whether a subtype of <code class="docutils literal notranslate"><span class="pre">I</span></code> also must contain items of type <code class="docutils literal notranslate"><span class="pre">A</span></code>, or if it can contain some subtype or supertype of <code class="docutils literal notranslate"><span class="pre">A</span></code>.</p>
<p>In the explanations below, we will refer to the type <code class="docutils literal notranslate"><span class="pre">I&lt;*&gt;</span></code> as the “container”, where <code class="docutils literal notranslate"><span class="pre">*</span></code> is the type that it <em>uses</em>.
We will also use the term “general type” to refer to a supertype, and the term “specific type” to refer to a subtype when discussing the possible variant type.
Meaning the type used in the container.</p>
<p>Let’s break down the terminology.</p>
<section id="covariance">
<h3><span class="section-number">78.2.1. </span>Covariance<a class="headerlink" href="#covariance" title="Permalink to this headline">#</a></h3>
<p>Covariance means that the usual ordering of types hold also in subtypes of the container.
Meaning that a subtype of the container may use a more <em>specific</em> type in place of the more <em>general</em> type.</p>
<p>Assume that we have the four types <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code>.
If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">B</span></code> (<code class="docutils literal notranslate"><span class="pre">A:B</span></code>) and if the type contained in <code class="docutils literal notranslate"><span class="pre">I</span></code> is <em>covariant</em>, then it must be true that <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;</span></code> is a <em>subtype</em> of <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code> (meaning <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;:I&lt;B&gt;</span></code>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span>  <span class="n">A</span><span class="p">:</span><span class="n">B</span>  <span class="n">then</span>  <span class="n">I</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="p">:</span><span class="n">I</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="contravariance">
<h3><span class="section-number">78.2.2. </span>Contravariance<a class="headerlink" href="#contravariance" title="Permalink to this headline">#</a></h3>
<p>Contravariance means that the usual ordering of types is inverted in subtypes of the container.
Meaning that a subtype of the container may use a more <em>general</em> type in place of the more <em>specific</em> type.</p>
<p>Assume that we have the four types <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code>.
If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">B</span></code> (<code class="docutils literal notranslate"><span class="pre">A:B</span></code>) and if the type contained in <code class="docutils literal notranslate"><span class="pre">I</span></code> is <em>contravariant</em>, then it must be true that <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;</span></code> is a <em>supertype</em> of <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code> (meaning <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;:I&lt;A&gt;</span></code>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">A</span><span class="p">:</span><span class="n">B</span> <span class="n">then</span> <span class="n">I</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="p">:</span><span class="n">I</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="id1">
<h3><span class="section-number">78.2.3. </span>Variance<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h3>
<p>A type rule that is variant is a type rule that is either covariant, contravariant, or bivariant.</p>
<p>Assume that we have the four types <code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code>.
If <code class="docutils literal notranslate"><span class="pre">A</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">B</span></code> (<code class="docutils literal notranslate"><span class="pre">A:B</span></code>) and if the type contained in <code class="docutils literal notranslate"><span class="pre">I</span></code> is <em>variant</em>, then it must be true that <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code>, a supertype of <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;</span></code>, or both.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">A</span><span class="p">:</span><span class="n">B</span> <span class="n">then</span> <span class="p">(</span><span class="n">I</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="p">:</span><span class="n">I</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span> <span class="ow">or</span> <span class="n">I</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;</span><span class="p">:</span><span class="n">I</span><span class="o">&lt;</span><span class="n">B</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="bivariance">
<h3><span class="section-number">78.2.4. </span>Bivariance<a class="headerlink" href="#bivariance" title="Permalink to this headline">#</a></h3>
<p>A type rule that is bivariant is <em>both</em> covariant and contravariant.</p>
<p>In other words, in subtypes of the container, the specific type can be used in place of the general type but the general type can also be used in place of the specific type.</p>
<p>This means that if we have <code class="docutils literal notranslate"><span class="pre">A:B</span></code> then we must have both <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;:I&lt;B&gt;</span></code> <em>and</em> <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;:I&lt;A&gt;</span></code>.</p>
</section>
<section id="invariance">
<h3><span class="section-number">78.2.5. </span>Invariance<a class="headerlink" href="#invariance" title="Permalink to this headline">#</a></h3>
<p>Invariance means that no ordering of types is respected.
The type rule is not variant and thus neither covariant nor contravariant.</p>
<p>Meaning that in subtypes of the container, the same type must be used as was used in the supertype.</p>
<p>This means that even if <code class="docutils literal notranslate"><span class="pre">A:B</span></code> it is neither permissible to state <code class="docutils literal notranslate"><span class="pre">I&lt;A&gt;:I&lt;B&gt;</span></code> nor <code class="docutils literal notranslate"><span class="pre">I&lt;B&gt;:I&lt;A&gt;</span></code>.</p>
</section>
</section>
<section id="example">
<h2><span class="section-number">78.3. </span>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h2>
<section id="robustness-principle">
<span id="id2"></span><h3><span class="section-number">78.3.1. </span>Robustness principle<a class="headerlink" href="#robustness-principle" title="Permalink to this headline">#</a></h3>
<p>The quote below is known as the Robustness principle, or Postel’s laws after Jon Postel <span id="id3">[<a class="reference internal" href="bibliography.html#id10" title="Jon Postel. Transmission control protocol: RFC 761. 1980. URL: https://datatracker.ietf.org/doc/html/rfc761.">Postel, 1980</a>]</span> used the wording in a specification of TCP.
While not originally stated in a way related to variance, it is a very common saying used to explain variance.
The principles states:</p>
<blockquote class="epigraph">
<div><p>[B]e conservative in what you do, be liberal in what you accept from others.</p>
<p class="attribution">—<span id="id4">Postel [<a class="reference internal" href="bibliography.html#id10" title="Jon Postel. Transmission control protocol: RFC 761. 1980. URL: https://datatracker.ietf.org/doc/html/rfc761.">1980</a>]</span></p>
</div></blockquote>
<p>The principle suggested that one should be liberal in what data one accepts from others if their intentions are clear.
However, one should simultaneously take great care not to give others incorrect data.</p>
<p>In terms of variance, this means that we should be <em>contravariant when receiving input</em>, and <em>covariant when producing output</em>.</p>
<p>In other words, if I claim to be a subtype of some type then whenever I receive input in an instance method, then I should at least be able to handle all kinds of input that my supertype can handle.
But I can of course also be able to handle <em>more</em> kinds of input.
I’m liberal in what I accept.
I’m contravariant in input.</p>
<p>On the flipside, if I claim to be a subtype of some type then whenever I return output from an instance method, then I should only ever return the kind of input that my supertype returns.
But if I want to I might of course return an even <em>narrower</em> set of output.
I’m conservative in what I send.
I’m covariant in output.</p>
<p>As we will see in the chapter on the <a class="reference internal" href="liskov-substitution-principle.html#liskov-substitution-principle"><span class="std std-ref">Liskov substitution principle</span></a>, this maps exactly to the idea of behavioral substitutability.
So imprint this saying in your mind, and return to it, whenever you get confused on this journey into the world of substitutability.</p>
<p>Conveniently, we will, in the chapter on <a class="reference internal" href="variant-generic-interfaces.html"><span class="doc std std-doc">variant generic interfaces</span></a> see that the keyword in C# to specify covariance is <code class="docutils literal notranslate"><span class="pre">out</span></code> (as in “output”) while the keyword for contravariance is <code class="docutils literal notranslate"><span class="pre">in</span></code> (as in “input”).
So as long as you remember the Robustness principle, remember which keyword does what, should be dead simple.</p>
</section>
<section id="covariant-return-types">
<h3><span class="section-number">78.3.2. </span>Covariant return types<a class="headerlink" href="#covariant-return-types" title="Permalink to this headline">#</a></h3>
<p>C# supports covariant subtypes, but not contravariant parameter types, in classes but not in interfaces.</p>
<p>In the example below we’re declaring an abstract class called <code class="docutils literal notranslate"><span class="pre">CharToCharCipherFactory</span></code> with an abstract method with the signature <code class="docutils literal notranslate"><span class="pre">abstract</span> <span class="pre">ICharToCharCipher</span> <span class="pre">Make</span></code>.
Subclasses of the class must override the method and without covariance, meaning with invariance, they would have to declare that the method also returns something of type <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code>.</p>
<p>Since C# however does support covariant return types, we can opt to let the overriding method return any subtype of <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code>.
In the example below, we’re declaring that the subclass <code class="docutils literal notranslate"><span class="pre">CaesarCipherFactory</span></code> returns values of type <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> rather than <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">ICharToCharCipher</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">CaesarCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICharToCharCipher</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">steps</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">alphabet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVXYZ&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">newIndex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"> </span><span class="p">%</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="p">-</span><span class="m">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">newIndex</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">newIndex</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"></span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">IsLower</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToLower</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">]);</span><span class="w"></span>
<span class="w">      </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div>
    <div id='dotnet-interactive-this-cell-4152.Microsoft.DotNet.Interactive.Http.HttpPort' style='display: none'>
        The below script needs to be able to find the current output cell; this is an easy method to get it.
    </div>
    <script type='text/javascript'>
async function probeAddresses(probingAddresses) {
    function timeout(ms, promise) {
        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                reject(new Error('timeout'))
            }, ms)
            promise.then(resolve, reject)
        })
    }

    if (Array.isArray(probingAddresses)) {
        for (let i = 0; i < probingAddresses.length; i++) {

            let rootUrl = probingAddresses[i];

            if (!rootUrl.endsWith('/')) {
                rootUrl = `${rootUrl}/`;
            }

            try {
                let response = await timeout(1000, fetch(`${rootUrl}discovery`, {
                    method: 'POST',
                    cache: 'no-cache',
                    mode: 'cors',
                    timeout: 1000,
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: probingAddresses[i]
                }));

                if (response.status == 200) {
                    return rootUrl;
                }
            }
            catch (e) { }
        }
    }
}

function loadDotnetInteractiveApi() {
    probeAddresses(["http://10.1.0.109:1024/", "http://127.0.0.1:1024/"])
        .then((root) => {
        // use probing to find host url and api resources
        // load interactive helpers and language services
        let dotnetInteractiveRequire = require.config({
        context: '4152.Microsoft.DotNet.Interactive.Http.HttpPort',
                paths:
            {
                'dotnet-interactive': `${root}resources`
                }
        }) || require;

            window.dotnetInteractiveRequire = dotnetInteractiveRequire;

            window.configureRequireFromExtension = function(extensionName, extensionCacheBuster) {
                let paths = {};
                paths[extensionName] = `${root}extensions/${extensionName}/resources/`;
                
                let internalRequire = require.config({
                    context: extensionCacheBuster,
                    paths: paths,
                    urlArgs: `cacheBuster=${extensionCacheBuster}`
                    }) || require;

                return internalRequire
            };
        
            dotnetInteractiveRequire([
                    'dotnet-interactive/dotnet-interactive'
                ],
                function (dotnet) {
                    dotnet.init(window);
                },
                function (error) {
                    console.log(error);
                }
            );
        })
        .catch(error => {console.log(error);});
    }

// ensure `require` is available globally
if ((typeof(require) !==  typeof(Function)) || (typeof(require.config) !== typeof(Function))) {
    let require_script = document.createElement('script');
    require_script.setAttribute('src', 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js');
    require_script.setAttribute('type', 'text/javascript');
    
    
    require_script.onload = function() {
        loadDotnetInteractiveApi();
    };

    document.getElementsByTagName('head')[0].appendChild(require_script);
}
else {
    loadDotnetInteractiveApi();
}

    </script>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">abstract</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CharToCharCipherFactory</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">abstract</span><span class="w"> </span><span class="n">ICharToCharCipher</span><span class="w"> </span><span class="nf">Make</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">CaesarCipherFactory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">CharToCharCipherFactory</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="w"> </span><span class="nf">Make</span><span class="w"> </span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="exercises">
<h2><span class="section-number">78.4. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">#</a></h2>
<div class="exercise admonition" id="chapters/variance-exercise-0">

<p class="admonition-title"><span class="caption-number">Exercise 78.1 </span></p>
<section id="exercise-content">
<p>Define the following terms:</p>
<ol class="simple">
<li><p>Covariance.</p></li>
<li><p>Contravariance.</p></li>
<li><p>Invariance.</p></li>
</ol>
</section>
</div>
<div class="exercise admonition" id="chapters/variance-exercise-1">

<p class="admonition-title"><span class="caption-number">Exercise 78.2 </span></p>
<section id="exercise-content">
<p>How does variance relate to object composition?</p>
</section>
</div>
<div class="exercise admonition" id="chapters/variance-exercise-2">

<p class="admonition-title"><span class="caption-number">Exercise 78.3 </span></p>
<section id="exercise-content">
<p>How does the Robustness principle (also known as Postel’s law) relate to variance?</p>
</section>
</div>
<div class="exercise admonition" id="chapters/variance-exercise-3">

<p class="admonition-title"><span class="caption-number">Exercise 78.4 </span></p>
<section id="exercise-content">
<p>What do we mean when we say that method input types is contravariant and method output types are covariant?</p>
</section>
</div>
<div class="exercise admonition" id="chapters/variance-exercise-4">

<p class="admonition-title"><span class="caption-number">Exercise 78.5 </span></p>
<section id="exercise-content">
<p>Come up with your own example that uses a covariant return type and implement the example in code.</p>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: ".net-csharp"
        },
        kernelOptions: {
            kernelName: ".net-csharp",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = '.net-csharp'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="abstract-injected-object-composition.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">77. </span>Abstract injected object composition</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="liskov-substitution-principle.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">79. </span>Liskov substitution principle</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Christopher Okhravi<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>