
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>60. Concrete injected object composition &#8212; The Object Oriented Way (DRAFT)</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="61. Interfaces" href="interfaces.html" />
    <link rel="prev" title="59. Concrete constructed object composition" href="concrete-constructed-object-composition.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-V69WNXD095"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-V69WNXD095');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">The Object Oriented Way (DRAFT)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Fundamentals
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="sets.html">
   1. ★ Sets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functions.html">
   2. ★ Functions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Terminals
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="terminals.html">
   3. Terminals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="standard-out.html">
   4. Standard out
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="standard-in.html">
   5. Standard in
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Computation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="algorithms.html">
   6. ★ Algorithms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="computation.html">
   7. ★ Computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="syntax.html">
   8. ★ Syntax
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="semantics.html">
   9. ★ Semantics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="compilation.html">
   10. ★ Compilation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="execution.html">
   11. ★ Execution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interpretation.html">
   12. ★ Interpretation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="errors.html">
   13. ★ Errors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="comments.html">
   14. ★ Comments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Values
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="values.html">
   15. ★ Values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="variables.html">
   16. ★ Variables
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statements &amp; expressions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="statements.html">
   17. Statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="expressions.html">
   18. Expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="operators.html">
   19. Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="paradigms.html">
   20. Paradigms
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-types.html">
   21. ★ Data types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-conversions.html">
   22. Type conversions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-checking.html">
   23. ★ Type-checking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-systems.html">
   24. ★ Type systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-hierarchies.html">
   25. Type hierarchies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-testing.html">
   26. Type testing
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basic types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="simple-types.html">
   27. Simple types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="enums.html">
   28. Enums
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="value-tuples.html">
   29. Value tuples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="arrays.html">
   30. Arrays
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Control flow
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="selection.html">
   31. ★ Selection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iteration.html">
   32. ★ Iteration
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Input/output
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="command-line-arguments.html">
   33. Command line arguments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Mutability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="mutability.html">
   34. Mutability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="immutable-objects.html">
   35. Immutable objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="value-and-reference-semantics.html">
   36. Value and reference semantics
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Nothingness
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="nothingness.html">
   37. ★ Nothingness
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Procedures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="methods.html">
   38. ★ Methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="method-composition.html">
   39. Method composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-classes.html">
   40. Static classes (Modules)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-methods.html">
   41. ★ Static methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="purity.html">
   42. Purity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="overloading.html">
   43. ★ Overloading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="recursion.html">
   44. Recursion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modules
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-structures.html">
   45. Data structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scope.html">
   46. Scope
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="namespaces.html">
   47. Namespaces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exceptions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="basic-exceptions.html">
   48. Exceptions (part 1)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stack-traces.html">
   49. Stack traces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Objects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="objects.html">
   50. ★ Objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="classes.html">
   51. ★ Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fields.html">
   52. ★ Fields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="constructors.html">
   53. ★ Constructors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="instance-methods.html">
   54. ★ Instance methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="properties.html">
   55. ★ Properties
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="basic-access-modifiers.html">
   56. ★ Access modifiers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="extension-methods.html">
   57. Extension methods
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Concrete object composition
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="object-composition.html">
   58. ★ Object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concrete-constructed-object-composition.html">
   59. ★ Concrete constructed object composition
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   60. ★ Concrete injected object composition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Subtype polymorphism
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="interfaces.html">
   61. ★ Interfaces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="subtype-polymorphism.html">
   62. ★ Subtype polymorphism
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inheritance.html">
   63. ★ Inheritance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-classes.html">
   64. ★ Abstract classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="advanced-access-modifiers.html">
   65. Access modifiers (advanced)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="hiding.html">
   66. Hiding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="object-type-conversions.html">
   67. Type conversions (of objects)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Abstract object composition
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-constructed-object-composition.html">
   68. ★ Abstract constructed object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-injected-object-composition.html">
   69. ★ Abstract injected object composition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Substitutability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="variance.html">
   70. ★ Variance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="liskov-substitution-principle.html">
   71. ★ Liskov substitution principle
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Generics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="generics.html">
   72. ★ Generics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-type-parameters.html">
   73. ★ Generic type parameters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-types.html">
   74. ★ Generic types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-methods.html">
   75. Generic methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-parameter-constraints.html">
   76. Type parameter constraints
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="variant-generic-interfaces.html">
   77. ★ Variant generic interfaces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Maintainability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="maintainability.html">
   78. ★ Maintainability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="requirements.html">
   79. Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="correctness.html">
   80. Correctness
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code-smells.html">
   81. Code smells and anti-patterns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coupling.html">
   82. Coupling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cohesion.html">
   83. Cohesion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="refactoring.html">
   84. (★E) Refactoring
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Principles
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design-principles.html">
   85. Design principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="single-responsibility-principle.html">
   86. Single responsibility principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interface-segregation-principle.html">
   87. (★E) Interface segregation principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deep-classes.html">
   88. Deep classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="types-over-tests.html">
   89. (★E) Types over tests
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="define-errors-out-of-existence.html">
   90. Define errors out of existence
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="open-closed-principle.html">
   91. (★E) Open-closed principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dependency-inversion-principle.html">
   92. (★E) Dependency inversion principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="composition-over-inheritance.html">
   93. (★E) Composition over inheritance
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Design patterns
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design-patterns.html">
   94. Design patterns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="strategy-pattern.html">
   95. ★ Strategy pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="null-object-pattern.html">
   96. Null object pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bridge-pattern.html">
   97. ★ Bridge pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="delegates.html">
   98. ★ Delegates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="observer-pattern.html">
   99. ★ Observer pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="events.html">
   100. ★ Events
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="adapter-pattern.html">
   101. Adapter pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="factory-method-pattern.html">
   102. ★ Factory method pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="composite-pattern.html">
   103. Composite pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="state-pattern.html">
   104. State pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iterator-pattern.html">
   105. Iterator pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="visitor-pattern.html">
   106. Visitor pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pattern-matching.html">
   107. Pattern matching
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lambdas
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lambdas.html">
   108. Lambdas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linq.html">
   109. LINQ
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  TODO
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="enumerators.html">
   110. Enumerators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indexers.html">
   111. Indexers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="streams.html">
   112. Streams
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="advanced-exceptions.html">
   113. Advanced exceptions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="prototypes.html">
   114. Prototypes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="base-class-library.html">
   115. Base class library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="boxing.html">
   116. Boxing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="structure-types.html">
   117. Structure types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="anonymous-types.html">
   118. Anonymous types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstraction.html">
   119. Abstraction / Modeling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indirection.html">
   120. Indirection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business-logic.html">
   121. Business logic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business-objects.html">
   122. Business objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="debugging.html">
   123. Debugging
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Epilogue
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="reading.html">
   Suggested reading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/chrokh/the-oo-way/main?urlpath=tree/docs/chapters/concrete-injected-object-composition.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/chrokh/the-oo-way/issues/new?title=Issue%20on%20page%20%2Fchapters/concrete-injected-object-composition.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/chapters/concrete-injected-object-composition.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="../_sources/chapters/concrete-injected-object-composition.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   60.1. Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   60.2. Definition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   60.3. Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#flip-flop-caesar-cipher">
     60.3.1. Flip flop Caesar cipher
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generalizing">
     60.3.2. Generalizing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#discussion">
   60.4. Discussion
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   60.5. Exercises
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Concrete injected object composition</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   60.1. Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   60.2. Definition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   60.3. Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#flip-flop-caesar-cipher">
     60.3.1. Flip flop Caesar cipher
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generalizing">
     60.3.2. Generalizing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#discussion">
   60.4. Discussion
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   60.5. Exercises
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="concrete-injected-object-composition">
<h1><span class="section-number">60. </span>Concrete injected object composition<a class="headerlink" href="#concrete-injected-object-composition" title="Permalink to this headline">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Work in progress.</p>
</div>
<div class="info admonition">
<p class="admonition-title">Prerequisites</p>
<p>In this chapter we’re exploring the object composition abstraction level that we refer to as “concrete injected object composition”. Please have a look at the chapter <a class="reference internal" href="object-composition.html#object-composition-abstraction-levels"><span class="std std-ref">object composition</span></a> if you have not already.</p>
</div>
<section id="motivation">
<h2><span class="section-number">60.1. </span>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">#</a></h2>
<p>When we move from <em>constructed</em> to <em>injected</em> object composition we gain run-time modifiability of which object is being composed.
We gain the ability to change which object is composed into the composing object at run-time, instead of just at compile-time.
This is a form of “<a class="reference internal" href="dependency-inversion-principle.html"><span class="doc std std-doc">dependency injection</span></a>”.</p>
<p>What does this mean?
Think back to the ciphers that we built in the chapter on <a class="reference internal" href="concrete-constructed-object-composition.html"><span class="doc std std-doc">concrete constructed object composition</span></a>.
Remember how <code class="docutils literal notranslate"><span class="pre">FlipFlopCaesarCipher</span></code> had to expose all constructor parameters of <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>, the object that it constructed.
More generally, any constructor parameter of the composed object that we want to remain variable has to be exposed as a parameter (possibly through the constructor) of the composing object.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The danger of concrete constructed object composition is that whenever the constructor of the composed object changes, the composer must also change.</p>
</div>
<p>Why is this a problem?
Well, the change “ripples” through the system.
This is really bad for <a class="reference internal" href="maintainability.html"><span class="doc std std-doc">maintainability</span></a> and is part of an <span class="xref myst">anti-pattern</span> called “<a class="reference internal" href="code-smells.html#shotgun-surgery"><span class="std std-ref">shotgun surgery</span></a>”.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>When thinking about whether something is a good or bad design decision we should ask ourselves what happens if we take our current practice to the extreme.
What happens if I design my whole system like this?
What happens if I compose ten objects like this?
We’ll talk more about design in the chapter on <a class="reference internal" href="maintainability.html"><span class="doc std std-doc">maintainability</span></a> and its related chapters.</p>
</div>
<p>What happens if I have a class that instantiates a class, that instantiates a class, that instantiates a class, that instantiates a class, and so forth…
Well, if all the constructors have parameters and we want to expose all parameters then we will have to expose all parameters of all the constructors in the constructor of the outermost class.
This is bizarre and a nightmare to maintain.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you use constructed object compostion all the way “down”, the you have to sum the number of constructor arguments all the way “up”. Remember the <a class="reference internal" href="iteration.html#dry"><span class="std std-ref">DRY</span></a> principle? Kind of sounds like a lot of duplication, don’t you think?</p>
</div>
<p>So, hopefully that settles it.
Concrete constructed object composition should be used sparingly and with caution.
Let’s talk about better forms of object composition: injected object composition.</p>
</section>
<section id="definition">
<h2><span class="section-number">60.2. </span>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">#</a></h2>
<p>So how do we do <em>injected</em> concrete object composition instead of <em>constructed</em>?
Simple, by passing the composed object <em>itself</em> instead of the parameters of the object.
Instead of asking for parameters that I need to construct an object, I simply ask for the complete object.
Instead of directly creating the object that we need, we simply state what the data type is of the thing that we need.
Whoever is calling us is now responsible for getting hold of such an object before calling us.</p>
<p>Injection gives us the ability to expose the constructor parameters of the composed object without having to duplicate the parameters in the composing object.
Injection move the construction of the composition out of the composing object.
A third party is now resposible for instantiating the composer, the composed, and providing the composed to the composer.</p>
<p>We simply say: in order for me to do my job I need something of type <code class="docutils literal notranslate"><span class="pre">XYZ</span></code>, so if you need me to do my job you must first pass me something of type <code class="docutils literal notranslate"><span class="pre">XYZ</span></code>.
Whether our caller is the one who creates the object in the end is none of our concern.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In dependency injection, we expect an object that our callers are responsible for constructing instead of parameters that we use to construct the object ourselves.</p>
</div>
</section>
<section id="examples">
<h2><span class="section-number">60.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<section id="flip-flop-caesar-cipher">
<span id="concrete-injected-object-composition-examples-flip-flop"></span><h3><span class="section-number">60.3.1. </span>Flip flop Caesar cipher<a class="headerlink" href="#flip-flop-caesar-cipher" title="Permalink to this headline">#</a></h3>
<p>Let’s keep working on the <code class="docutils literal notranslate"><span class="pre">FlipFlopCaesarCipher</span></code> that we introduced in the chapter on <a class="reference internal" href="concrete-constructed-object-composition.html"><span class="doc std std-doc">concrete constructed object composition</span></a>.
It composes our <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> so first we need to get a hold of that definition.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CaesarCipher</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">steps</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">alphabet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVXYZ&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">newIndex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"> </span><span class="p">%</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="p">-</span><span class="m">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">newIndex</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">newIndex</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"></span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">IsLower</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToLower</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">]);</span><span class="w"></span>
<span class="w">      </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">letter</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">Encode</span><span class="p">(</span><span class="n">letter</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div>
    <div id='dotnet-interactive-this-cell-2505.Microsoft.DotNet.Interactive.Http.HttpPort' style='display: none'>
        The below script needs to be able to find the current output cell; this is an easy method to get it.
    </div>
    <script type='text/javascript'>
async function probeAddresses(probingAddresses) {
    function timeout(ms, promise) {
        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                reject(new Error('timeout'))
            }, ms)
            promise.then(resolve, reject)
        })
    }

    if (Array.isArray(probingAddresses)) {
        for (let i = 0; i < probingAddresses.length; i++) {

            let rootUrl = probingAddresses[i];

            if (!rootUrl.endsWith('/')) {
                rootUrl = `${rootUrl}/`;
            }

            try {
                let response = await timeout(1000, fetch(`${rootUrl}discovery`, {
                    method: 'POST',
                    cache: 'no-cache',
                    mode: 'cors',
                    timeout: 1000,
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: probingAddresses[i]
                }));

                if (response.status == 200) {
                    return rootUrl;
                }
            }
            catch (e) { }
        }
    }
}

function loadDotnetInteractiveApi() {
    probeAddresses(["http://10.1.1.16:1024/", "http://127.0.0.1:1024/"])
        .then((root) => {
        // use probing to find host url and api resources
        // load interactive helpers and language services
        let dotnetInteractiveRequire = require.config({
        context: '2505.Microsoft.DotNet.Interactive.Http.HttpPort',
                paths:
            {
                'dotnet-interactive': `${root}resources`
                }
        }) || require;

            window.dotnetInteractiveRequire = dotnetInteractiveRequire;

            window.configureRequireFromExtension = function(extensionName, extensionCacheBuster) {
                let paths = {};
                paths[extensionName] = `${root}extensions/${extensionName}/resources/`;
                
                let internalRequire = require.config({
                    context: extensionCacheBuster,
                    paths: paths,
                    urlArgs: `cacheBuster=${extensionCacheBuster}`
                    }) || require;

                return internalRequire
            };
        
            dotnetInteractiveRequire([
                    'dotnet-interactive/dotnet-interactive'
                ],
                function (dotnet) {
                    dotnet.init(window);
                },
                function (error) {
                    console.log(error);
                }
            );
        })
        .catch(error => {console.log(error);});
    }

// ensure `require` is available globally
if ((typeof(require) !==  typeof(Function)) || (typeof(require.config) !== typeof(Function))) {
    let require_script = document.createElement('script');
    require_script.setAttribute('src', 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js');
    require_script.setAttribute('type', 'text/javascript');
    
    
    require_script.onload = function() {
        loadDotnetInteractiveApi();
    };

    document.getElementsByTagName('head')[0].appendChild(require_script);
}
else {
    loadDotnetInteractiveApi();
}

    </script>
</div></div></div>
</div>
<p>How do we move from dependency construction to dependency injection?
Well, instead of instantiating the object that we want to compose ourselves, we simply ask for it as a parameter, in, for example, the constructor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">FlipFlopCaesarCipher</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">CaesarCipher</span><span class="w"> </span><span class="n">flip</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">CaesarCipher</span><span class="w"> </span><span class="n">flop</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">FlipFlopCaesarCipher</span><span class="w"> </span><span class="p">(</span><span class="n">CaesarCipher</span><span class="w"> </span><span class="n">flip</span><span class="p">,</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="w"> </span><span class="n">flop</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">flip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">flip</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">flop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">flop</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="p">&lt;</span><span class="n">input</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="p">++)</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">%</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">output</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">flip</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">      </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="n">output</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">flop</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Notice that the lines that instantiated <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>s and assigned them to the instance variables are now gone.
They used to look like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">flip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(</span><span class="n">steps</span><span class="p">);</span><span class="w"></span>
<span class="n">flop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(-</span><span class="n">steps</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>So where do we assign values to the variables <code class="docutils literal notranslate"><span class="pre">flip</span></code> and <code class="docutils literal notranslate"><span class="pre">flop</span></code> now?
We still need the variables and we still need values for them since we’re still calling the method <code class="docutils literal notranslate"><span class="pre">Encode</span></code> on them later.</p>
<p>Well, if you have a look at the constructor’s signature you can see that we’re now accepting two arguments of type <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>.
As we will learn in the chapter on <span class="xref myst">dependency inversion</span>, passing arguments like this is known as “constructor injection”.
In other words, the old two lines have been replaced with this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">this</span><span class="p">.</span><span class="n">flip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">flip</span><span class="p">;</span><span class="w"></span>
<span class="k">this</span><span class="p">.</span><span class="n">flop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">flop</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Instead of saying which particular <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> object we will use, and instead of requiring that users of this class pass whatever parameters we need to pass on to the <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> cwe simply state that to run this method you must also provide a <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> object.</p>
<p>So how do we use this updated class?
Let’s try it out by passing two objects of type <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> upon instantiation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="w"> </span><span class="n">cipher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FlipFlopCaesarCipher</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(-</span><span class="m">1</span><span class="p">));</span><span class="w"></span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="s">&quot;AABBCC&quot;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BZCADB
</pre></div>
</div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Instead of instantiating the dependency ourselves, we simply parameterize a method or a constructor so that callers can pass the dependency.</p>
</div>
<p>Importantly, the class <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> itself does <em>not</em> have to change at all.
Even though we’ve moved from <em>construction</em> to <em>injection</em> we can leave the code the same.
The main program however will have to change since the way we use our building blocks have changed.
We would now use our classes like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">FlipFlopCaesarCipher</span><span class="w"> </span><span class="n">cipher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FlipFlopCaesarCipher</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">10</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">3</span><span class="p">));</span><span class="w"></span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="s">&quot;AABBCC&quot;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>KDLEMF
</pre></div>
</div>
</div>
</div>
</section>
<section id="generalizing">
<span id="concrete-injected-object-composition-examples-general-flip-flop"></span><h3><span class="section-number">60.3.2. </span>Generalizing<a class="headerlink" href="#generalizing" title="Permalink to this headline">#</a></h3>
<p>At this point you might already have realized that the <code class="docutils literal notranslate"><span class="pre">FlipFlopCaesarCipher</span></code> actually has very little to do with the encoding-decoding idea.
Our current abstraction accepts any two objects of type <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> which means that we can send any two instances of it.
They don’t have to be arranged in a encode/decode fashion.</p>
<p>Pretty cool stuff right?
But hold your horses.
The basic idea of a flip flop cipher doesn’t even have anything to do with a Caesar cipher at all.
In the chapter on <span class="xref myst">abstract injected object composition</span> we’ll see how we can generalize beyond Caesar ciphers.
But to do that we need to learn about <a class="reference internal" href="subtype-polymorphism.html"><span class="doc std std-doc">subtype polymorphism</span></a> first.</p>
</section>
</section>
<section id="discussion">
<h2><span class="section-number">60.4. </span>Discussion<a class="headerlink" href="#discussion" title="Permalink to this headline">#</a></h2>
<p>When we are constructor injecting, we’re giving ourself the ability to create multiple different variations of the object receiving the injection (<code class="docutils literal notranslate"><span class="pre">FlipFlopCaesarCipher</span></code> by simply passing in a different instances of the injected object (<code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>).
This is immensely more flexible than in the case of concrete constructed object composition where we create the object directly.</p>
<p>In the case of dependency <em>construction</em> there is only ever two kinds of <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>.
Whatever two instances we instantiate. Those are the ones we’ll get.
In the case of dependency <em>injection</em> the number of different variations of <code class="docutils literal notranslate"><span class="pre">FlipFlopCaesarCipher</span></code> that we can instantiate simply depends on how many different variations of <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> we can instantiate and then inject.</p>
<p>Of course we could have written the same program using concrete <em>constructed</em> object composition.
Heck, we could even have written the same program using method composition.
But the point is not that the problem cannot be solved using a more direct technique.
The point is that the more direct technique is less <a class="reference internal" href="maintainability.html"><span class="doc std std-doc">maintainable</span></a>.
It suffers from what we later will learn to call <a class="reference internal" href="coupling.html"><span class="doc std std-doc">tighter coupling</span></a>.</p>
<p>What’s important to realize is that the behavior of <code class="docutils literal notranslate"><span class="pre">FlipFlopCaesarCipher</span></code> is not determined at <em>compile-time</em> but at <em>run-time</em>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>When we’re using dependency injection we give ourselves the ability to solve many different problems by simply composing our simple parts at run-time.</p>
</div>
<p>Perhaps more importantly, when we change our programs in this way, it’s mostly an exercise in <em>adding</em> code, not in <em>rewriting</em> code.
This is good, because whenever we rewrite something, we run the risk of breaking something.
You’ll learn more about this when we get to the <a class="reference internal" href="open-closed-principle.html"><span class="doc std std-doc">open-closed principle</span></a>.</p>
<p>If you think this is cool, man are you in for a treat.
Just wait until we get to <a class="reference internal" href="abstract-injected-object-composition.html"><span class="doc std std-doc">abstract injected object composition</span></a> for something that will really blow your mind.
And just wait until we get to <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a> and combine them with abstract injected object composition.</p>
</section>
<section id="exercises">
<h2><span class="section-number">60.5. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">#</a></h2>
<div class="exercise admonition" id="ex:concrete-injected-object-composition:leet">

<p class="admonition-title"><span class="caption-number">Exercise 60.1 </span></p>
<section id="exercise-content">
<p>Start from the code you wrote in <a class="reference internal" href="concrete-constructed-object-composition.html#ex:concrete-constructed-object-composition:leet"><span class="std std-numref">Exercise 59.2</span></a>.
Refactor the code so that the two <code class="docutils literal notranslate"><span class="pre">LeetCipher</span></code>s are <em>injected</em> through the constructor of the <code class="docutils literal notranslate"><span class="pre">FlipFlopLeetCipher</span></code> class instead of <em>instantiated</em> by it.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/concrete-injected-object-composition-exercise-1">

<p class="admonition-title"><span class="caption-number">Exercise 60.2 </span></p>
<section id="exercise-content">
<p>Compare your solutions to <a class="reference internal" href="concrete-constructed-object-composition.html#ex:concrete-constructed-object-composition:leet"><span class="std std-numref">Exercise 59.2</span></a> and <a class="reference internal" href="#ex:concrete-injected-object-composition:leet"><span class="std std-numref">Exercise 60.1</span></a>.
Use your own words to explain what we have gained, in terms of maintainability, by moving from concrete object <em>construction</em> to concrete object <em>injection</em>.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/concrete-injected-object-composition-exercise-2">

<p class="admonition-title"><span class="caption-number">Exercise 60.3 </span></p>
<section id="exercise-content">
<p>Write a class called <code class="docutils literal notranslate"><span class="pre">PositionWiseCaesarCipher</span></code> that takes an array of Caesar ciphers as input.
When encoding, you should apply the 1st cipher (at index 0) to the first letter, the 2nd cipher to the 2nd letter, and so forth.
If we run out of ciphers we simply “cycle” and start again from the first cipher.</p>
</section>
</div>
<div class="exercise admonition" id="ex:concrete-injected-object-composition:example">

<p class="admonition-title"><span class="caption-number">Exercise 60.4 </span></p>
<section id="exercise-content">
<p>What is concrete injected object composition?
Give your own example and explain it in your own words.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/concrete-injected-object-composition-exercise-4">

<p class="admonition-title"><span class="caption-number">Exercise 60.5 </span></p>
<section id="exercise-content">
<p>Implement the example you envisioned in <a class="reference internal" href="#ex:concrete-injected-object-composition:example"><span class="std std-numref">Exercise 60.4</span></a> in code.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/concrete-injected-object-composition-exercise-5">

<p class="admonition-title"><span class="caption-number">Exercise 60.6 </span></p>
<section id="exercise-content">
<p>What is the difference between concrete <em>constructed</em> and <em>injected</em> object composition?
Give your own examples and explain it in your own words.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/concrete-injected-object-composition-exercise-6">

<p class="admonition-title"><span class="caption-number">Exercise 60.7 </span></p>
<section id="exercise-content">
<p>Why is concrete constructed object composition problematic?</p>
<p><em>Hint: Constructor arguments.</em></p>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: ".net-csharp"
        },
        kernelOptions: {
            kernelName: ".net-csharp",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = '.net-csharp'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="concrete-constructed-object-composition.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">59. </span>Concrete constructed object composition</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="interfaces.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">61. </span>Interfaces</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Christopher Okhravi<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>