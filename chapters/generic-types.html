
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>81. Generic types &#8212; The Object Oriented Way (DRAFT)</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="82. Generic methods" href="generic-methods.html" />
    <link rel="prev" title="80. Generic type parameters" href="generic-type-parameters.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-V69WNXD095"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-V69WNXD095');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">The Object Oriented Way (DRAFT)</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Fundamentals
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="sets.html">
   1. ★ Sets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="functions.html">
   2. ★ Functions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Terminals
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="terminals.html">
   3. Terminals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="standard-out.html">
   4. Standard out
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="standard-in.html">
   5. Standard in
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Computation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="algorithms.html">
   6. ★ Algorithms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="computation.html">
   7. ★ Computation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="syntax.html">
   8. ★ Syntax
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="semantics.html">
   9. ★ Semantics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="compilation.html">
   10. ★ Compilation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="execution.html">
   11. ★ Execution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interpretation.html">
   12. ★ Interpretation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="errors.html">
   13. ★ Errors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="comments.html">
   14. ★ Comments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Values
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="values.html">
   15. ★ Values
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="variables.html">
   16. ★ Variables
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Statements &amp; expressions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="statements.html">
   17. Statements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="expressions.html">
   18. Expressions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="operators.html">
   19. Operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="paradigms.html">
   20. Paradigms
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Data types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-types.html">
   21. ★ Data types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-conversions.html">
   22. Type conversions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-checking.html">
   23. ★ Type-checking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-systems.html">
   24. ★ Type systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-hierarchies.html">
   25. Type hierarchies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-testing.html">
   26. Type testing
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basic types
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="simple-types.html">
   27. Simple types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="enums.html">
   28. Enums
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="value-tuples.html">
   29. Value tuples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="arrays.html">
   30. Arrays
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Control flow
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="selection.html">
   31. ★ Selection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iteration.html">
   32. ★ Iteration
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Input/output
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="command-line-arguments.html">
   33. Command line arguments
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Mutability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="mutability.html">
   34. Mutability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="immutable-objects.html">
   35. Immutable objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="value-and-reference-semantics.html">
   36. Value and reference semantics
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Nothingness
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="nothingness.html">
   37. ★ Nothingness
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Procedures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="methods.html">
   38. ★ Methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="method-composition.html">
   39. Method composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-classes.html">
   40. Static classes (Modules)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="static-methods.html">
   41. ★ Static methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="purity.html">
   42. Purity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="overloading.html">
   43. ★ Overloading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="recursion.html">
   44. Recursion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Modules
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-structures.html">
   45. Data structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scope.html">
   46. Scope
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="namespaces.html">
   47. Namespaces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exceptions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="basic-exceptions.html">
   48. Exceptions (part 1)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="stack-traces.html">
   49. Stack traces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Requirements
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="requirements.html">
   50. ★ Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="validation.html">
   51. Validation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="verification.html">
   52. Verification
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Maintainability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="maintainability.html">
   53. ★ Maintainability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="refactoring.html">
   54. (★E) Refactoring
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coupling.html">
   55. Coupling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dont-repeat-yourself.html">
   56. Don’t repeat yourself
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Objects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="objects.html">
   57. ★ Objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="classes.html">
   58. ★ Classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fields.html">
   59. ★ Fields
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="constructors.html">
   60. ★ Constructors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="instance-methods.html">
   61. ★ Instance methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="properties.html">
   62. ★ Properties
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="basic-access-modifiers.html">
   63. ★ Access modifiers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="extension-methods.html">
   64. Extension methods
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Concrete object composition
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="object-composition.html">
   65. ★ Object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concrete-constructed-object-composition.html">
   66. ★ Concrete constructed object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concrete-injected-object-composition.html">
   67. ★ Concrete injected object composition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Subtype polymorphism
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="interfaces.html">
   68. ★ Interfaces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="subtype-polymorphism.html">
   69. ★ Subtype polymorphism
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="inheritance.html">
   70. ★ Inheritance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-classes.html">
   71. ★ Abstract classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="advanced-access-modifiers.html">
   72. Access modifiers (advanced)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="hiding.html">
   73. Hiding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="object-type-conversions.html">
   74. Type conversions (of objects)
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Abstract object composition
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-constructed-object-composition.html">
   75. ★ Abstract constructed object composition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstract-injected-object-composition.html">
   76. ★ Abstract injected object composition
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Substitutability
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="variance.html">
   77. ★ Variance
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="liskov-substitution-principle.html">
   78. ★ Liskov substitution principle
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Generics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="generics.html">
   79. ★ Generics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-type-parameters.html">
   80. ★ Generic type parameters
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   81. ★ Generic types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generic-methods.html">
   82. Generic methods
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="type-parameter-constraints.html">
   83. Type parameter constraints
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="variant-generic-interfaces.html">
   84. ★ Variant generic interfaces
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Principles
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design-principles.html">
   85. Design principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="single-responsibility-principle.html">
   86. Single responsibility principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="interface-segregation-principle.html">
   87. (★E) Interface segregation principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deep-classes.html">
   88. Deep classes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="types-over-tests.html">
   89. (★E) Types over tests
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="define-errors-out-of-existence.html">
   90. Define errors out of existence
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="open-closed-principle.html">
   91. (★E) Open-closed principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dependency-inversion-principle.html">
   92. (★E) Dependency inversion principle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="composition-over-inheritance.html">
   93. (★E) Composition over inheritance
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Design patterns
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="design-patterns.html">
   94. Design patterns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="strategy-pattern.html">
   95. ★ Strategy pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="null-object-pattern.html">
   96. Null object pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bridge-pattern.html">
   97. ★ Bridge pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="delegates.html">
   98. ★ Delegates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="observer-pattern.html">
   99. ★ Observer pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="events.html">
   100. ★ Events
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="adapter-pattern.html">
   101. Adapter pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="factory-method-pattern.html">
   102. ★ Factory method pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="composite-pattern.html">
   103. Composite pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="state-pattern.html">
   104. State pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="iterator-pattern.html">
   105. Iterator pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="visitor-pattern.html">
   106. Visitor pattern
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pattern-matching.html">
   107. Pattern matching
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lambdas
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="lambdas.html">
   108. Lambdas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="linq.html">
   109. LINQ
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  TODO
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="code-smells.html">
   110. Code smells and anti-patterns
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="enumerators.html">
   111. Enumerators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indexers.html">
   112. Indexers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="streams.html">
   113. Streams
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="advanced-exceptions.html">
   114. Advanced exceptions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="prototypes.html">
   115. Prototypes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="base-class-library.html">
   116. Base class library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="boxing.html">
   117. Boxing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="structure-types.html">
   118. Structure types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="anonymous-types.html">
   119. Anonymous types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="abstraction.html">
   120. Abstraction / Modeling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="indirection.html">
   121. Indirection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business-logic.html">
   122. Business logic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="business-objects.html">
   123. Business objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="debugging.html">
   124. Debugging
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Epilogue
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="reading.html">
   Suggested reading
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/chrokh/the-oo-way/main?urlpath=tree/docs/chapters/generic-types.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/chrokh/the-oo-way/issues/new?title=Issue%20on%20page%20%2Fchapters/generic-types.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/chapters/generic-types.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="../_sources/chapters/generic-types.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   81.1. Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   81.2. Definition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   81.3. Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pairs">
     81.3.1. Pairs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generic-cipher-interface">
     81.3.2. Generic cipher interface
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#identity-cipher">
     81.3.3. Identity cipher
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#concrete-ciphers">
     81.3.4. Concrete ciphers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#composite-ciphers">
     81.3.5. Composite ciphers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#composing-different-types">
     81.3.6. Composing different types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   81.4. Exercises
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Generic types</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#motivation">
   81.1. Motivation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   81.2. Definition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   81.3. Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pairs">
     81.3.1. Pairs
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generic-cipher-interface">
     81.3.2. Generic cipher interface
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#identity-cipher">
     81.3.3. Identity cipher
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#concrete-ciphers">
     81.3.4. Concrete ciphers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#composite-ciphers">
     81.3.5. Composite ciphers
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#composing-different-types">
     81.3.6. Composing different types
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   81.4. Exercises
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="generic-types">
<h1><span class="section-number">81. </span>Generic types<a class="headerlink" href="#generic-types" title="Permalink to this headline">#</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Work in progress.</p>
</div>
<p>In the chapter on <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a> we gave an introduction to the different aspects of generics.
In this chapter we will discuss “generic types”, meaning generic classes and interfaces.</p>
<section id="motivation">
<h2><span class="section-number">81.1. </span>Motivation<a class="headerlink" href="#motivation" title="Permalink to this headline">#</a></h2>
<p>In the chapter on <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a> we showed how some problems cannot sensibly be solved by means of <a class="reference internal" href="subtype-polymorphism.html"><span class="doc std std-doc">subtype polymorphism</span></a> (overriding) or <a class="reference internal" href="overloading.html"><span class="doc std std-doc">ad-hoc polymorphism</span></a> (overloading).
In cases where the implementation is the same, but the types are different, and no type can be a subtype of the other, it is instead often possible to use parametric polymorphism (or “generics” as we call it in C#) to eliminate duplication and increase modularity.</p>
<p>The most common use case for generic types in C# is probably that of generic collections.
C# offers an extensive <a class="reference internal" href="type-hierarchies.html"><span class="doc std std-doc">type hierarchy</span></a> of generic collection types which include both interfaces and concrete classes.
This involves everything from simple types like <code class="docutils literal notranslate"><span class="pre">Set&lt;T&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">Stack&lt;T&gt;</span></code> to more complex types like <code class="docutils literal notranslate"><span class="pre">Dictionary&lt;TKey,TValue&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">KeyedCollection&lt;TKey,TItem&gt;</span></code>.</p>
<p>But there are tons of problems that we can solve by writing our own generic types and that’s mostly what we’re going to explore in this chapter.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Generic types allow us to build arbitrarily complex types that depend on other types without needing any knowledge of said types, and while still retaining static type safety.</p>
</div>
<p>If you want to build a type that somehow depends on some other type or types without using generics you have to either resort to using the <a class="reference internal" href="type-systems.html"><span class="doc std std-doc">dynamic</span></a> keyword or treat your dependencies as the top-type <a class="reference internal" href="type-hierarchies.html"><span class="doc std std-doc">object</span></a>.
In both cases we will most likely have to perform unsafe <a class="reference internal" href="object-type-conversions.html"><span class="doc std std-doc">type conversions</span></a> to do anything meaningful.
Which means that we run the risk of run-time errors.</p>
<p>Let’s look at an example without using generics.
Let’s say that we’re trying to build a simple and <a class="reference internal" href="immutable-objects.html#immutable-objects"><span class="std std-ref">immutable</span></a> type that simply encapsulates a value of an unknown type.
The value is set through the constructor and can be extracted through a <a class="reference internal" href="properties.html"><span class="doc std std-doc">property</span></a>.
Let’s call it a “box”.</p>
<p>Using the <code class="docutils literal notranslate"><span class="pre">dynamic</span></code> keyword it would look something like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DynamicBox</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">dynamic</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">DynamicBox</span><span class="w"> </span><span class="p">(</span><span class="kt">dynamic</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Using the top-type object it would look something like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ObjectBox</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">object</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">ObjectBox</span><span class="w"> </span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Simple enough, right?
Does it work?
Sure, both these types work in the sense that we can instantiate them and plop any type of value inside.</p>
<div class="admonition-aside admonition">
<p class="admonition-title">Aside</p>
<p>In fact, if our type could store multiple values at the same time (like say a list) we could even mix values of different types in the same box.
If you want to read more about such a type, have a look at the archeic type <code class="docutils literal notranslate"><span class="pre">ArrayList</span></code> in the <a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.arraylist?view=net-6.0#remarks">documentation</a>.</p>
</div>
<p>Let’s try putting values of different types in our boxes.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">new</span><span class="w"> </span><span class="nf">DynamicBox</span><span class="p">(</span><span class="m">123</span><span class="p">);</span><span class="w"></span>
<span class="k">new</span><span class="w"> </span><span class="nf">DynamicBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"></span>

<span class="k">new</span><span class="w"> </span><span class="nf">ObjectBox</span><span class="p">(</span><span class="m">123</span><span class="p">);</span><span class="w"></span>
<span class="k">new</span><span class="w"> </span><span class="nf">ObjectBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>No compile-time errors.
No run-time errors.
So far so good.
But when we try to access the values that are contained in a box we might get slapped with run-time errors since the box could contain values of a type that’s different from what we were expecting.
In the example below, we store a <code class="docutils literal notranslate"><span class="pre">string</span></code> in the box built using <code class="docutils literal notranslate"><span class="pre">dynamic</span></code> and then extract the value and try to assign it to a variable of type <code class="docutils literal notranslate"><span class="pre">int</span></code>.
The code compiles.
But what happens when we run it?
Boom!
We get hit with a run-time exception.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">DynamicBox</span><span class="w"> </span><span class="n">dynStrBox</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DynamicBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">dynStrBox</span><span class="p">.</span><span class="n">X</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Unhandled exception. Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type &#39;string&#39; to &#39;int&#39;</span>
</pre></div>
</div>
<p>But this error just says that we can’t <em>implicitly</em> convert between the types.
What if we <em>explicitly</em> convert (by saying <code class="docutils literal notranslate"><span class="pre">(int)dynStrBox.X</span></code>)?
Same problem, we just get a different exception.
A <code class="docutils literal notranslate"><span class="pre">string</span></code> is just simply not an <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Unhandled exception. Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot convert type &#39;string&#39; to &#39;int&#39;</span>
</pre></div>
</div>
<p>Let’s try doing the same thing with the box built using <code class="docutils literal notranslate"><span class="pre">object</span></code>.
Note that now we’re using the type <code class="docutils literal notranslate"><span class="pre">object</span></code> as opposed to bypassing static type-checking all-together, as in the case of using the keyword <code class="docutils literal notranslate"><span class="pre">dynamic</span></code>.
This means that we have to use <a class="reference internal" href="object-type-conversions.html"><span class="doc std std-doc">downcasting</span></a> to convert from <code class="docutils literal notranslate"><span class="pre">object</span></code> to whatever type we expect to have.
Same thing here.
The code compiles.
But what happens when we run it?
Boom!
We get hit with a run-time exception.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">ObjectBox</span><span class="w"> </span><span class="n">objStrBox</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectBox</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">objStrBox</span><span class="p">.</span><span class="n">X</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">Unhandled exception. System.InvalidCastException: Unable to cast object of type &#39;System.String&#39; to type &#39;System.Int32&#39;.</span>
</pre></div>
</div>
<p>At its core, this is question of <a class="reference internal" href="type-systems.html#static-vs-dynamic"><span class="std std-ref">dynamic vs static typing</span></a>.
If you use downcasting or the dynamic keyword you might as well leave the world of static typing all-together.
As we’ve discussed in the chapters on <a class="reference internal" href="type-checking.html"><span class="doc std std-doc">type checking</span></a> and <a class="reference internal" href="type-systems.html"><span class="doc std std-doc">type systems</span></a> static typing has immense benefits.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Static typing has immense benefits.
So don’t give it up willy-nilly.
Use generic types to solve the same problem.
Generic types enable us to retain static type safety.</p>
</div>
<p>A generic version of the box type above might look something like this:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Box</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Box</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>We can still stick any type of value in the box.
Importantly however, we must declare what type of values we will be putting in the box before we put any values there.
More precisely, we must make a constructed generic type (e.g. <code class="docutils literal notranslate"><span class="pre">Box&lt;int&gt;</span></code>) out of our generic type definition (<code class="docutils literal notranslate"><span class="pre">Box&lt;T&gt;</span></code>) by replacing our type parameter (<code class="docutils literal notranslate"><span class="pre">&lt;T&gt;</span></code>) with a type argument (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;int&gt;</span></code>).</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Box</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span><span class="w"> </span><span class="n">box5</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Box</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">123</span><span class="p">);</span><span class="w"></span>
<span class="n">Box</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">box6</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Box</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"> </span><span class="n">x5</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">box5</span><span class="p">.</span><span class="n">X</span><span class="p">;</span><span class="w"> </span><span class="c1">// Compiles.</span>
<span class="kt">int</span><span class="w"> </span><span class="n">x6</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">box6</span><span class="p">.</span><span class="n">X</span><span class="p">;</span><span class="w"> </span><span class="c1">// Does not compile!</span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">error CS0029: Cannot implicitly convert type &#39;string&#39; to &#39;int&#39;.</span>
</pre></div>
</div>
<p>If we now try to convert the value to a type of which it cannot be converted we get a type-error at compile-time.
As we’ve discussed in <a class="reference internal" href="errors.html#prefer-compile-time-errors"><span class="std std-ref">previous chapters</span></a> compile-time errors are much preferable than run-time errors.
The code above simply won’t compile if the types don’t line up.
Therefore we’ll never be able to see this error when the application is actually running.</p>
</section>
<section id="definition">
<h2><span class="section-number">81.2. </span>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">#</a></h2>
<p>A “generic type definition” is not a type but acts as a “template” of a type.
The types of some of the dependencies of the generic type definition are not known at the time of declaration.
These unknown types are represented by <a class="reference internal" href="generic-type-parameters.html"><span class="doc std std-doc">type parameters</span></a>.</p>
<p>When the generic type definition is turned into a “constructed generic type” it becomes a complete type and no longer acts as a template.
To turn the generic type definition into a constructed generic type we must substitute the type parameters with type arguments, meaning actual types.</p>
<p>Both classes and interfaces can be used to declare generic type definitions.
However, only interfaces support, what is known as, type parameter “<a class="reference internal" href="variance.html"><span class="doc std std-doc">variance</span></a>”.
Don’t worry if you have no idea what that means.
We will look at variance in detail in the chapter on <a class="reference internal" href="variant-generic-interfaces.html"><span class="doc std std-doc">variant generic interfaces</span></a>.
This means that all type parameters in generic class definitions are invariant as opposed to variant.</p>
<p>A type parameter can be used anywhere in a generic type definition where a regular type would be used.
This includes input and output types of methods; the type of variables, fields, or properties; or types delegates.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Unless you place <a class="reference internal" href="type-parameter-constraints.html"><span class="doc std std-doc">constraints</span></a> on a type parameter you cannot make any assumptions about what its interface is.</p>
</div>
<p>Importantly, we can also use a type parameter when stating what other types our type <a class="reference internal" href="inheritance.html"><span class="doc std std-doc">inherits from</span></a> or which <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interfaces</span></a> it implements.
That means that it’s possible to combine <a class="reference internal" href="subtype-polymorphism.html"><span class="doc std std-doc">subtyping</span></a> and <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a>.
As you might already suspect, that is very useful.
In the examples section you’ll find many cases of combining the two.
Let’s move on to the examples.</p>
</section>
<section id="examples">
<h2><span class="section-number">81.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<p>In this section we’ll first build a simple generic type.
Then we will spend some time refactoring our ciphers to use generics and combine it with subtyping.
Finally, we will explore a few common generic collection types that are built in to .NET.</p>
<section id="pairs">
<h3><span class="section-number">81.3.1. </span>Pairs<a class="headerlink" href="#pairs" title="Permalink to this headline">#</a></h3>
<p>Let’s start by building our own generic type for storing <a class="reference internal" href="immutable-objects.html#immutable-objects"><span class="std std-ref">immutable</span></a> pairs of values.
The two values in any given pair doesn’t necessarily have to be of the same type.
This data type is commonly called a “Tuple” and it should be noted that .NET already does has a type like this.
Please see the <a class="reference external" href="https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/value-tuples">documentation</a> for more information.
Nevertheless, this is a simple enough type to make a useful example.
So let’s go.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pair</span><span class="p">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T1</span><span class="w"> </span><span class="n">Value1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="n">Value2</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">get</span><span class="p">;</span><span class="w"> </span><span class="k">private</span><span class="w"> </span><span class="k">set</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">Pair</span><span class="w"> </span><span class="p">(</span><span class="n">T1</span><span class="w"> </span><span class="n">value1</span><span class="p">,</span><span class="w"> </span><span class="n">T2</span><span class="w"> </span><span class="n">value2</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Value1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">value1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">Value2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">value2</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The code above defines a generic class, called <code class="docutils literal notranslate"><span class="pre">Pair</span></code>, with two type parameters referred to as <code class="docutils literal notranslate"><span class="pre">T1</span></code> and <code class="docutils literal notranslate"><span class="pre">T2</span></code>.
Since there’s only a single constructor which takes two arguments (one for each value in the pair) there’s no way to construct an instance of <code class="docutils literal notranslate"><span class="pre">Pair</span></code> without also providing both values.
The type also contains two <a class="reference internal" href="properties.html"><span class="doc std std-doc">properties</span></a> with <a class="reference internal" href="basic-access-modifiers.html"><span class="doc std std-doc">public</span></a> getters but private setters.
So when you instantiate a pair you have to provide both values.
When you have an instance you can extract the values but you cannot change them.
That’s it, and voilà, we’ve written our own generic type definition.</p>
<p>How can you use this?
Well, remember, this is only a generic type definition.
You have to turn it into a constructed generic type.
How do you do that?
By simply replacing the type parameters with actual types.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Pair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">&gt;</span><span class="w"> </span><span class="n">p1</span><span class="p">;</span><span class="w"></span>
<span class="n">Pair</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">p2</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>In the code we’re declaring the two variables <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code> and we’re saying that their types are two constructed generic types.
The first constructed type replaces both type parameters with <code class="docutils literal notranslate"><span class="pre">int</span></code>.
The second constructed type replaces <code class="docutils literal notranslate"><span class="pre">T1</span></code> with <code class="docutils literal notranslate"><span class="pre">string</span></code> and <code class="docutils literal notranslate"><span class="pre">T2</span></code> with <code class="docutils literal notranslate"><span class="pre">bool</span></code>.
Let’s now initialize some variables.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">Pair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">&gt;</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Pair</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">200</span><span class="p">);</span><span class="w"></span>
<span class="n">Pair</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="p">&gt;</span><span class="w"> </span><span class="n">p4</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Pair</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>In the code above we create two new pair variables with the same type as before but now we initialize them immediately.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The type arguments in the compile-time type (meaning the type on the left) are the same types as the type arguments in the run-time types (meaning the type on the right).
If the type parameters of the generic type are invariant then they have to be the same for type-checking to succeed.
If you want to be able to use a different type argument in the run-time type, you must make your type parameters variant.
But this we’ll look into in the chapter on <a class="reference internal" href="variant-generic-interfaces.html"><span class="doc std std-doc">variant generic interfaces</span></a>.</p>
</div>
<p>Remember how we said that generics retain static type safety?
Since the constructed type of <code class="docutils literal notranslate"><span class="pre">p3</span></code> is <code class="docutils literal notranslate"><span class="pre">Pair&lt;string,</span> <span class="pre">bool&gt;</span></code> the compiler knows that anytime we use the getter for <code class="docutils literal notranslate"><span class="pre">Value1</span></code> we will get back a <code class="docutils literal notranslate"><span class="pre">string</span></code>, and whenever we access the getter for <code class="docutils literal notranslate"><span class="pre">Value2</span></code> we will get back a <code class="docutils literal notranslate"><span class="pre">bool</span></code>.
That means that if we use the types in an incorrect manner we’ll get a compiler error instead of an embarrassing and possibly costly run-time error.
That’s great.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">Value1</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">error CS0029: Cannot implicitly convert type &#39;string&#39; to &#39;bool&#39;.</span>
</pre></div>
</div>
</section>
<section id="generic-cipher-interface">
<span id="generic-types-icipher"></span><h3><span class="section-number">81.3.2. </span>Generic cipher interface<a class="headerlink" href="#generic-cipher-interface" title="Permalink to this headline">#</a></h3>
<p>Remember how we, in the introductory chapter to <a class="reference internal" href="generics.html"><span class="doc std std-doc">generics</span></a>, promised that we would combine our <a class="reference internal" href="interfaces.html"><span class="doc std std-doc">interfaces</span></a> <code class="docutils literal notranslate"><span class="pre">IStringToStringCipher</span></code>, <code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code>, and <code class="docutils literal notranslate"><span class="pre">ICharToStringCipher</span></code> into a single generic interface?
That’s what well do now.
In the coming examples we’ll see what this type allows us to do.</p>
<p>Combining the cipher interfaces into a single interface is a simple task as soon as we realize that we can model encoding as the act of taking a value of some type as input and providing a possibly different value of possibly different type as output.
Let’s use meaningful names for our type parameters and call the two types <code class="docutils literal notranslate"><span class="pre">TIn</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code>.
The former (<code class="docutils literal notranslate"><span class="pre">TIn</span></code>) is the type of values that an implementor of our interface can encode.
The latter (<code class="docutils literal notranslate"><span class="pre">TOut</span></code>) is the type of values that an implementor of our interface returns when encoding.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">TIn</span><span class="p">,</span><span class="w"> </span><span class="n">TOut</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">TOut</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">TIn</span><span class="w"> </span><span class="n">input</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div>
    <div id='dotnet-interactive-this-cell-2838.Microsoft.DotNet.Interactive.Http.HttpPort' style='display: none'>
        The below script needs to be able to find the current output cell; this is an easy method to get it.
    </div>
    <script type='text/javascript'>
async function probeAddresses(probingAddresses) {
    function timeout(ms, promise) {
        return new Promise(function (resolve, reject) {
            setTimeout(function () {
                reject(new Error('timeout'))
            }, ms)
            promise.then(resolve, reject)
        })
    }

    if (Array.isArray(probingAddresses)) {
        for (let i = 0; i < probingAddresses.length; i++) {

            let rootUrl = probingAddresses[i];

            if (!rootUrl.endsWith('/')) {
                rootUrl = `${rootUrl}/`;
            }

            try {
                let response = await timeout(1000, fetch(`${rootUrl}discovery`, {
                    method: 'POST',
                    cache: 'no-cache',
                    mode: 'cors',
                    timeout: 1000,
                    headers: {
                        'Content-Type': 'text/plain'
                    },
                    body: probingAddresses[i]
                }));

                if (response.status == 200) {
                    return rootUrl;
                }
            }
            catch (e) { }
        }
    }
}

function loadDotnetInteractiveApi() {
    probeAddresses(["http://10.1.0.167:1024/", "http://127.0.0.1:1024/"])
        .then((root) => {
        // use probing to find host url and api resources
        // load interactive helpers and language services
        let dotnetInteractiveRequire = require.config({
        context: '2838.Microsoft.DotNet.Interactive.Http.HttpPort',
                paths:
            {
                'dotnet-interactive': `${root}resources`
                }
        }) || require;

            window.dotnetInteractiveRequire = dotnetInteractiveRequire;

            window.configureRequireFromExtension = function(extensionName, extensionCacheBuster) {
                let paths = {};
                paths[extensionName] = `${root}extensions/${extensionName}/resources/`;
                
                let internalRequire = require.config({
                    context: extensionCacheBuster,
                    paths: paths,
                    urlArgs: `cacheBuster=${extensionCacheBuster}`
                    }) || require;

                return internalRequire
            };
        
            dotnetInteractiveRequire([
                    'dotnet-interactive/dotnet-interactive'
                ],
                function (dotnet) {
                    dotnet.init(window);
                },
                function (error) {
                    console.log(error);
                }
            );
        })
        .catch(error => {console.log(error);});
    }

// ensure `require` is available globally
if ((typeof(require) !==  typeof(Function)) || (typeof(require.config) !== typeof(Function))) {
    let require_script = document.createElement('script');
    require_script.setAttribute('src', 'https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js');
    require_script.setAttribute('type', 'text/javascript');
    
    
    require_script.onload = function() {
        loadDotnetInteractiveApi();
    };

    document.getElementsByTagName('head')[0].appendChild(require_script);
}
else {
    loadDotnetInteractiveApi();
}

    </script>
</div></div></div>
</div>
<p>Simple as that.
This means that we’re now replacing our old specific and verbosely named interfaces with constructed generic interfaces based on the generic interface above.
See <a class="reference internal" href="#tbl-generic-types-examples-mapping"><span class="std std-numref">Table 81.1</span></a> for a summary of what we’re replacing our old interfaces with.</p>
<table class="table" id="tbl-generic-types-examples-mapping">
<caption><span class="caption-number">Table 81.1 </span><span class="caption-text">We can now replace our old specific interfaces with constructed generic interfaces.</span><a class="headerlink" href="#tbl-generic-types-examples-mapping" title="Permalink to this table">#</a></caption>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Before</p></th>
<th class="head"><p>After</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ICharToCharCipher</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,char&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ICharToStringCipher</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,string&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">IStringToString</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ICipher&lt;string,string&gt;</span></code></p></td>
</tr>
</tbody>
</table>
<p>We haven’t talked about decoding up to this point.
Let’s stop and think about it for one second.
If we took a <code class="docutils literal notranslate"><span class="pre">char</span></code> like <code class="docutils literal notranslate"><span class="pre">L</span></code> and encoded it using the <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> with the vowel <code class="docutils literal notranslate"><span class="pre">o</span></code> then we would end up with <code class="docutils literal notranslate"><span class="pre">LoL</span></code>.
We map from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.
If we then wanted to decode that <code class="docutils literal notranslate"><span class="pre">string</span></code> we should map from <code class="docutils literal notranslate"><span class="pre">string</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code>.
Before our generic types we could of course just have defined that interface and called it <code class="docutils literal notranslate"><span class="pre">IStringToCharCipher</span></code>.
However, with our generic type in place, it’s as simple as making a new constructed generic interface on the fly by simply saying <code class="docutils literal notranslate"><span class="pre">ICipher&lt;string,char&gt;</span></code>.
Pretty neat.</p>
</section>
<section id="identity-cipher">
<h3><span class="section-number">81.3.3. </span>Identity cipher<a class="headerlink" href="#identity-cipher" title="Permalink to this headline">#</a></h3>
<p>Before we start looking at something more complex let’s look at the simplest possible cipher, the identity cipher.
Interestingly, the identity cipher can also be implemented generically.
Meaning for all types at the same time.
Since the identity cipher just returns whatever value you give it we don’t need any additional type information to implement it.</p>
<p>In the identity cipher however, <code class="docutils literal notranslate"><span class="pre">TIn</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code> must always be the same type since we always get back the same value as the one we sent in.
So when replacing our type parameters with type arguments we will make sure to use the same type parameter for both <code class="docutils literal notranslate"><span class="pre">TIn</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code>.
So let’s implement that.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">IdentityCipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Notice how we need to specify that <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> too is a generic type definition by adding the type parameter <code class="docutils literal notranslate"><span class="pre">T</span></code> to its type parameter list.
If we hadn’t added a type parameter to the type definition we would not have said that <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> is a generic type.
This would lead to a compiler error because in the part where we implement the <code class="docutils literal notranslate"><span class="pre">ICipher&lt;T&gt;</span></code> interface we do mention <code class="docutils literal notranslate"><span class="pre">T</span></code>.
So this type argument <code class="docutils literal notranslate"><span class="pre">T</span></code> needs to be declared as a type somewhere.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Remember that it doesn’t matter if we say <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">A</span></code> or <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">-&gt;</span> <span class="pre">T</span></code>.
These are just type parameter names.
What matters is whether the name of two type arguments is the same or not.</p>
</div>
<p>We are also making use of the same <code class="docutils literal notranslate"><span class="pre">T</span></code> on the line where we define the <code class="docutils literal notranslate"><span class="pre">Encode</span></code> method.
Only the <code class="docutils literal notranslate"><span class="pre">T</span></code> within the parameter list of the type that we’re now defining (namely <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> and not <code class="docutils literal notranslate"><span class="pre">ICipher</span></code> is a type parameter.
All other occurrences of <code class="docutils literal notranslate"><span class="pre">T</span></code> are making use of <code class="docutils literal notranslate"><span class="pre">T</span></code>, not declaring that it’s a parameter.
In all other occurrences <code class="docutils literal notranslate"><span class="pre">T</span></code> is a <a class="reference internal" href="generics.html#generics-terminology"><span class="std std-ref">type argument</span></a>, not a type parameter.</p>
<p>Had we omitted the type parameter <code class="docutils literal notranslate"><span class="pre">T</span></code> in the subtype <code class="docutils literal notranslate"><span class="pre">IdentityCipher</span></code> we would get three compiler errors.
One for every usage of the type <code class="docutils literal notranslate"><span class="pre">T</span></code> which would no longer be declared.
Have a look at the erroneous code and the corresponding error below.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">IdentityCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1,32): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)

(1,35): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)

(3,20): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)

(3,10): error CS0246: The type or namespace name &#39;T&#39; could not be found (are you missing a using directive or an assembly reference?)
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="concrete-ciphers">
<h3><span class="section-number">81.3.4. </span>Concrete ciphers<a class="headerlink" href="#concrete-ciphers" title="Permalink to this headline">#</a></h3>
<p>Let’s now make our different ciphers implement this interface.</p>
<p>We’ll start with the <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code>
Recall that the encoding method of the <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> maps from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code>.
So our constructed generic interface that we want to implement must have type <code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,</span> <span class="pre">char&gt;</span></code>.
Because <code class="docutils literal notranslate"><span class="pre">TIn</span></code> is a <code class="docutils literal notranslate"><span class="pre">char</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code> is a <code class="docutils literal notranslate"><span class="pre">char</span></code>.
Notice how <code class="docutils literal notranslate"><span class="pre">CaesarCipher</span></code> remains a non-generic type.
All we’re doing is that we’re saying that it implements an interface which is a constructed generic type.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CaesarCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">steps</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">steps</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">alphabet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVXYZ&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">newIndex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">+</span><span class="w"> </span><span class="n">steps</span><span class="p">)</span><span class="w"> </span><span class="p">%</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="p">-</span><span class="m">1</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">newIndex</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">newIndex</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">alphabet</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span><span class="w"></span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">IsLower</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Char</span><span class="p">.</span><span class="n">ToLower</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">]);</span><span class="w"></span>
<span class="w">      </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">alphabet</span><span class="p">[</span><span class="n">newIndex</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s try <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code>
As we know, the encode method of the <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> maps from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.
So, it’s as simple as saying that our class implements the constructed generic interface <code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,string&gt;</span></code>.
In other words, it implements the constructed generic interface <code class="docutils literal notranslate"><span class="pre">ICipher</span></code> where <code class="docutils literal notranslate"><span class="pre">TIn</span></code> is <code class="docutils literal notranslate"><span class="pre">char</span></code> and <code class="docutils literal notranslate"><span class="pre">TOut</span></code> is <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">RobbersCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">private</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">RobbersCipher</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">vowel</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">vowel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">vowel</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">consonants</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;BCDFGHJKLMNPQRSTVXYZ&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">consonants</span><span class="p">.</span><span class="n">IndexOf</span><span class="p">(</span><span class="n">Char</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">(</span><span class="n">input</span><span class="p">))</span><span class="w"> </span><span class="p">!=</span><span class="w"> </span><span class="p">-</span><span class="m">1</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}{vowel}{input}&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="s">$&quot;{input}&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Same deal with <code class="docutils literal notranslate"><span class="pre">LeetCipher</span></code> but here we implement the constructed generic interface <code class="docutils literal notranslate"><span class="pre">ICipher&lt;char,char&gt;</span></code>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LeetCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;L&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;1&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;L&#39;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;4&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;4&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;O&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;O&#39;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;T&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;7&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;7&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;T&#39;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;E&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;3&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;3&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="sc">&#39;E&#39;</span><span class="p">;</span><span class="w"></span>
<span class="w">      </span><span class="k">default</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Pretty straight-forward right?
The implementations don’t have to change.
All we’re doing is that we’re replacing our old verbose and overly specific interfaces with constructed generic interfaces.</p>
</section>
<section id="composite-ciphers">
<h3><span class="section-number">81.3.5. </span>Composite ciphers<a class="headerlink" href="#composite-ciphers" title="Permalink to this headline">#</a></h3>
<p>In the chapter on <a class="reference internal" href="abstract-injected-object-composition.html#abstract-injected-object-composition-examples-composite-ciphers"><span class="std std-ref">abstract injected object composition</span></a> we implemented a composite cipher that, when encoding, essentially applied one cipher after another.
Unfortunately our implementation only supported ciphers that map from <code class="docutils literal notranslate"><span class="pre">string</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.
We stated that while it would certainly be both possible and useful to write an implementation that supports ciphers that map from, say, <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code> it would also lead to us duplicating the whole class.
Not good.</p>
<p>Remember how we said that if the implementation is the same, but the types are different, and no type can be a subtype of another, then we can probably use generics?
Well, that’s precisely the case that we have here.</p>
<p>Let’s write a new and <em>generic</em> implementation of <code class="docutils literal notranslate"><span class="pre">CompositeCipher</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CompositeCipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">second</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CompositeCipher</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span><span class="n">T</span><span class="p">&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">second</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">second</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>Does it work like before?
Yes indeed.
All we have to do is to swap out the types and then we can run exactly the same example as before.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">CompositeCipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">&gt;</span><span class="w"> </span><span class="n">composite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompositeCipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">&gt;(</span><span class="w"></span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">LeetCipher</span><span class="p">());</span><span class="w"></span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">composite</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="sc">&#39;E&#39;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>F
</pre></div>
</div>
</div>
</div>
<p>Of course, that’s not all.
The whole point of this was that we wanted to be able to support compositions of other types of ciphers.
Did we succeed in that?</p>
<p>To be able to give an example we have to first quickly change the interfaces of our types <code class="docutils literal notranslate"><span class="pre">SubstitutionCipher</span></code> and <code class="docutils literal notranslate"><span class="pre">CharToStringAdapter</span></code> from the chapter on <a class="reference internal" href="abstract-injected-object-composition.html"><span class="doc std std-doc">abstract injected object composition</span></a>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SubstitutionCipher</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">SubstitutionCipher</span><span class="w"> </span><span class="p">(</span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">cipher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">SubstitutionCipher</span><span class="w"> </span><span class="p">(</span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">cipher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CharToStringAdapter</span><span class="p">(</span><span class="n">cipher</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">string</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">      </span><span class="n">output</span><span class="w"> </span><span class="p">+=</span><span class="w"> </span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">output</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">class</span><span class="w"> </span><span class="nc">CharToStringAdapter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CharToStringAdapter</span><span class="w"> </span><span class="p">(</span><span class="n">ICipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">cipher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">cipher</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">cipher</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">).</span><span class="n">ToString</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>With that out of the way, let’s now look at an example that uses our generic composite cipher type to compose ciphers that map from <code class="docutils literal notranslate"><span class="pre">string</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="kt">var</span><span class="w"> </span><span class="n">caesars</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubstitutionCipher</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">));</span><span class="w"></span>
<span class="kt">var</span><span class="w"> </span><span class="n">leet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubstitutionCipher</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">LeetCipher</span><span class="p">());</span><span class="w"></span>

<span class="n">CompositeCipher</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">composite</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="n">CompositeCipher</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="n">caesars</span><span class="p">,</span><span class="w"> </span><span class="n">leet</span><span class="p">);</span><span class="w"></span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">composite</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BCD3FGHIJK1MN0PQRS7UVXWYZ4
</pre></div>
</div>
</div>
</div>
</section>
<section id="composing-different-types">
<h3><span class="section-number">81.3.6. </span>Composing different types<a class="headerlink" href="#composing-different-types" title="Permalink to this headline">#</a></h3>
<p>But wait a minute.
Who says the first input have to equal the final output?
It doesn’t really matter what type of value the first cipher returns as long as its the same type of value that the second cipher expects as input.</p>
<p>Let’s write a more general definition.
How about the following?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">CompositeCipher</span><span class="p">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span><span class="p">&gt;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T3</span><span class="p">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span><span class="p">&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="nf">CompositeCipher</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">      </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">&gt;</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">ICipher</span><span class="p">&lt;</span><span class="n">T2</span><span class="p">,</span><span class="n">T3</span><span class="p">&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="n">second</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">second</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="n">T3</span><span class="w"> </span><span class="nf">Encode</span><span class="w"> </span><span class="p">(</span><span class="n">T1</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">second</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">first</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="n">input</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<p>But why is this needed you ask?
Well, because now we can compose an instance of <code class="docutils literal notranslate"><span class="pre">RobbersCipher</span></code> which maps from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">string</span></code> with the other ciphers that map from <code class="docutils literal notranslate"><span class="pre">char</span></code> to <code class="docutils literal notranslate"><span class="pre">char</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">CompositeCipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="n">composite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CompositeCipher</span><span class="p">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="kt">char</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;(</span><span class="w"></span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">CaesarCipher</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="nf">RobbersCipher</span><span class="p">(</span><span class="sc">&#39;o&#39;</span><span class="p">));</span><span class="w"></span>

<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">composite</span><span class="p">.</span><span class="n">Encode</span><span class="p">(</span><span class="sc">&#39;A&#39;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>BoB
</pre></div>
</div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>We are now closing in on something called “function composition” so if your’e intrigued by this then I highly recommend that you look in to functional programming.
But finish this book first, because we have a lot more to learn that will also aid in understanding functional programming.</p>
</div>
<p>Feels like it’s all coming together.
But don’t worry, we have many chapters to go and more cool things left to do.</p>
</section>
</section>
<section id="exercises">
<h2><span class="section-number">81.4. </span>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">#</a></h2>
<div class="exercise admonition" id="chapters/generic-types-exercise-0">

<p class="admonition-title"><span class="caption-number">Exercise 81.1 </span></p>
<section id="exercise-content">
<p>What are genric types?</p>
</section>
</div>
<div class="exercise admonition" id="chapters/generic-types-exercise-1">

<p class="admonition-title"><span class="caption-number">Exercise 81.2 </span></p>
<section id="exercise-content">
<p>What is the difference between a generic type <em>definition</em> and a <em>constructed</em> generic type?</p>
</section>
</div>
<div class="exercise admonition" id="chapters/generic-types-exercise-2">

<p class="admonition-title"><span class="caption-number">Exercise 81.3 </span></p>
<section id="exercise-content">
<p>Why does the generic type <code class="docutils literal notranslate"><span class="pre">CompositeCipher&lt;T1,T2,T3&gt;</span></code> require three type parameters? Can we achieve the same functionality with just two?</p>
</section>
</div>
<div class="exercise admonition" id="chapters/generic-types-exercise-3">

<p class="admonition-title"><span class="caption-number">Exercise 81.4 </span></p>
<section id="exercise-content">
<p>Rewrite the class <code class="docutils literal notranslate"><span class="pre">SequenceCipher</span></code> from <a class="reference internal" href="abstract-injected-object-composition.html#ex:array-cipher"><span class="std std-numref">Exercise 76.6</span></a> so that it implements a construction of the generic interface <code class="docutils literal notranslate"><span class="pre">ICipher&lt;TIn,TOut&gt;</span></code>.
Bonus question: Can the class <code class="docutils literal notranslate"><span class="pre">SequenceCipher</span></code> be made generic?
Why or why not?</p>
</section>
</div>
<div class="exercise admonition" id="ex:generic-types:conditional-cipher">

<p class="admonition-title"><span class="caption-number">Exercise 81.5 </span></p>
<section id="exercise-content">
<p>Rewrite the conditional cipher that we implemented in <a class="reference internal" href="abstract-injected-object-composition.html#abstract-injected-object-composition:exercises:predicates"><span class="std std-numref">Exercise 76.7</span></a> so that it is generic.</p>
<p>Hint: This also requires that we rewrite the predicate interface from that same exercise.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/generic-types-exercise-5">

<p class="admonition-title"><span class="caption-number">Exercise 81.6 </span></p>
<section id="exercise-content">
<p>Come up with and implement your own <em>generic type</em> that fits into our ecosystem of ciphers.</p>
</section>
</div>
<div class="exercise admonition" id="chapters/generic-types-exercise-6">

<p class="admonition-title"><span class="caption-number">Exercise 81.7 </span></p>
<section id="exercise-content">
<p>Come up with and implement your own type that subtypes a constructed generic type.
The constructed generic type should be constructed from one of the generic types that we’ve discussed in this chapter.</p>
</section>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: ".net-csharp"
        },
        kernelOptions: {
            kernelName: ".net-csharp",
            path: "./chapters"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = '.net-csharp'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="generic-type-parameters.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">80. </span>Generic type parameters</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="generic-methods.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">82. </span>Generic methods</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Christopher Okhravi<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>